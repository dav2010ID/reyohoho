!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw c}}}}function r(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function i(t,o,a,c){var i=o&&o.prototype instanceof s?o:s,l=Object.create(i.prototype);return n(l,"_invoke",function(t,n,o){var a,c,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(r,t){return a=r,c=0,i=e,d.n=t,u}};function v(t,n){for(c=t,i=n,r=0;!f&&s&&!o&&r<l.length;r++){var o,a=l[r],v=d.p,p=a[2];t>3?(o=p===n)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=v&&((o=t<2&&v<a[1])?(c=0,d.v=n,d.n=a[1]):v<p&&(o=t<3||a[0]>n||n>p)&&(a[4]=t,a[5]=n,d.n=p,c=0))}if(o||t>1)return u;throw f=!0,n}return function(o,l,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&v(l,p),c=l,i=p;(r=c<2?e:i)||!f;){a||(c?c<3?(c>1&&(d.n=-1),v(c,i)):d.n=i:d.v=i);try{if(s=2,a){if(c||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,c<2&&(c=0)}else 1===c&&(r=a.return)&&r.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((r=(f=d.n<0)?i:t.call(n,d))!==u)break}catch(r){a=e,c=1,i=r}finally{s=1}}return{value:r,done:f}}}(t,a,c),!0),l}var u={};function s(){}function l(){}function f(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,function(){return this}),r),v=f.prototype=s.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=f,n(v,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,c,"GeneratorFunction"),n(v),n(v,c,"Generator"),n(v,a,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:p}})()}function n(e,r,t,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,r,t,o){function c(r,t){n(e,r,function(e){return this._invoke(r,t,e)})}r?a?a(e,r,{value:t,enumerable:!o,configurable:!o,writable:!o}):e[r]=t:(c("next",0),c("throw",1),c("return",2))},n(e,r,t,o)}function o(e,r,t,n,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}function a(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var c=e.apply(r,t);function i(e){o(c,n,a,i,u,"next",e)}function u(e){o(c,n,a,i,u,"throw",e)}i(void 0)})}}System.register(["./index-legacy-TQNKiDFQ.js"],function(r,n){"use strict";var o,c,i,u,s,l,f,d,v,p,h,g,y,m,b,w,x,k,S;return{setters:[e=>{o=e._,c=e.b,i=e.j,u=e.d,s=e.e,l=e.t,f=e.w,d=e.p,v=e.x,p=e.v,h=e.r,g=e.o,y=e.aZ,m=e.P,b=e.U,w=e.G,x=e.aj,k=e.i,S=e.l}],execute:function(){var n=document.createElement("style");n.textContent=".auth-success-container[data-v-f30093c3]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;padding:20px}.loading-message[data-v-f30093c3],.loading-message2[data-v-f30093c3],.success-message[data-v-f30093c3],.error-message[data-v-f30093c3]{max-width:400px;padding:20px;border-radius:8px}.loading-message[data-v-f30093c3]{background-color:#1d1d1d}.success-message[data-v-f30093c3]{background-color:#1d1d1d;color:#fff}.error-message[data-v-f30093c3]{background-color:#1d1d1d;color:var(--accent-color);border:1px solid var(--accent-color);border-radius:8px}.spinner[data-v-f30093c3]{border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top:4px solid var(--accent-color);width:30px;height:30px;animation:spin-f30093c3 1s linear infinite;margin:20px auto}@keyframes spin-f30093c3{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.retry-button[data-v-f30093c3],.home-button[data-v-f30093c3]{display:inline-block;margin-top:15px;padding:8px 16px;background-color:var(--accent-color);color:#fff;text-decoration:none;border-radius:4px;transition:background-color .3s}.retry-button[data-v-f30093c3]:hover,.home-button[data-v-f30093c3]:hover{background-color:var(--accent-hover)}\n/*$vite$:1*/",document.head.appendChild(n);var j={name:"AuthSuccess",setup(){var r=w(),n=v(),o=p(),c=h(!0),i=h(!1),u=h(!1),s=h(null),l=h("/reyohoho/"),f=function(){var f=a(t().m(function f(){var d,v,p,h,g,w,k,S,j,O;return t().w(function(f){for(;;)switch(f.p=f.n){case 0:if(f.p=0,d=new URLSearchParams(window.location.search),v=d.get("token")){f.n=1;break}throw new Error("Токен авторизации не найден");case 1:return n.setToken(v),window.history.replaceState({},document.title,`${l.value}auth-success`),f.n=2,y();case 2:return p=f.v,n.setUser(p),f.n=3,m(b.HISTORY);case 3:if(h=f.v,console.log(`response.length: ${h.length}`),0===h.length){f.n=4;break}return c.value=!1,u.value=!0,setTimeout(a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.push({path:"/"});case 1:r.go(0);case 2:return e.a(2)}},e)})),2e3),f.a(2);case 4:c.value=!1,i.value=!0,f.p=5,g=e([...o.history].reverse()),f.p=6,g.s();case 7:if((w=g.n()).done){f.n=9;break}return k=w.value,f.n=8,x(k.kp_id,b.HISTORY);case 8:f.n=7;break;case 9:f.n=11;break;case 10:f.p=10,S=f.v,g.e(S);case 11:return f.p=11,g.f(),f.f(11);case 12:f.n=14;break;case 13:f.p=13,j=f.v,console.error("Auth error:",j),s.value="Произошла ошибка при переноси истории, попробуйте позднее...",i.value=!1;case 14:i.value=!1,u.value=!0,setTimeout(a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.push({path:"/"});case 1:r.go(0);case 2:return e.a(2)}},e)})),2e3),console.log(h),f.n=16;break;case 15:f.p=15,O=f.v,console.error("Auth error:",O),s.value=O.message,c.value=!1;case 16:return f.a(2)}},f,null,[[6,10,11,12],[5,13],[0,15]])}));return function(){return f.apply(this,arguments)}}();return g(()=>{f()}),{loading:c,success:u,moveHistory:i,error:s}}},O={class:"auth-success-container"},T={key:0,class:"loading-message"},_={key:1,class:"loading-message2"},A={key:2,class:"error-message"},P={key:3,class:"success-message"};r("default",o(j,[["render",function(e,r,t,n,o,a){var v=d("router-link");return k(),c("div",O,[n.loading?(k(),c("div",T,r[0]||(r[0]=[u("p",null,"Происходит авторизация...",-1),u("div",{class:"spinner"},null,-1)]))):i("",!0),n.moveHistory?(k(),c("div",_,r[1]||(r[1]=[u("p",null,"Переносим историю...",-1),u("div",{class:"spinner"},null,-1)]))):i("",!0),n.error?(k(),c("div",A,[u("p",null,"Ошибка авторизации: "+l(n.error),1),s(v,{to:"/login",class:"retry-button"},{default:f(()=>r[2]||(r[2]=[S("Попробовать снова")])),_:1})])):i("",!0),n.success?(k(),c("div",P,[r[4]||(r[4]=u("p",null,"Авторизация прошла успешно!",-1)),s(v,{to:"/",class:"home-button"},{default:f(()=>r[3]||(r[3]=[S("На главную")])),_:1})])):i("",!0)])}],["__scopeId","data-v-f30093c3"]]))}}})}();
