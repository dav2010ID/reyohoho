!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach(function(e){r(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var u=n&&n.prototype instanceof l?n:l,c=Object.create(u.prototype);return s(c,"_invoke",function(r,n,a){var o,l,u,s=0,c=a||[],d=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,r){return o=t,l=0,u=e,p.n=r,i}};function v(r,n){for(l=r,u=n,t=0;!d&&s&&!a&&t<c.length;t++){var a,o=c[t],v=p.p,f=o[2];r>3?(a=f===n)&&(u=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=v&&((a=r<2&&v<o[1])?(l=0,p.v=n,p.n=o[1]):v<f&&(a=r<3||o[0]>n||n>f)&&(o[4]=r,o[5]=n,p.n=f,l=0))}if(a||r>1)return i;throw d=!0,n}return function(a,c,f){if(s>1)throw TypeError("Generator is already running");for(d&&1===c&&v(c,f),l=c,u=f;(t=l<2?e:u)||!d;){o||(l?l<3?(l>1&&(p.n=-1),v(l,u)):p.n=u:p.v=u);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(d=p.n<0)?u:r.call(n,p))!==i)break}catch(t){o=e,l=1,u=t}finally{s=1}}return{value:t,done:d}}}(r,a,o),!0),c}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(s(t={},n,function(){return this}),t),v=d.prototype=l.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=d,s(v,"constructor",d),s(d,"constructor",c),c.displayName="GeneratorFunction",s(d,a,"GeneratorFunction"),s(v),s(v,a,"Generator"),s(v,n,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),(u=function(){return{w:o,m:f}})()}function s(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}s=function(e,t,r,n){function o(t,r){s(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},s(e,t,r,n)}function c(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){c(o,n,a,i,l,"next",e)}function l(e){c(o,n,a,i,l,"throw",e)}i(void 0)})}}System.register(["./index-legacy-DE4qYhPF.js","./MovieList-legacy-B58RuojU.js","./ToastMessage-legacy-DpMdH0pw.js","./BaseModal-legacy-ea_Ouj2G.js","./SpinnerLoading-legacy-DMT2bK_T.js","./icon-imdb-logo-legacy-DY9dgmyD.js","./htmlSanitizer-legacy-BuNrU8dK.js"],function(e,r){"use strict";var o,i,s,c,p,v,f,b,y,g,h,m,w,x,k,j,O,S,A,E,T,D,N,_,C,P,R,I,z,L,$,M,H;return{setters:[e=>{o=e._,i=e.l,s=e.U,c=e.x,p=e.v,v=e.A,f=e.o,b=e.c,y=e.d,g=e.F,h=e.r,m=e.t,w=e.g,x=e.D,k=e.n,j=e.m,O=e.E,S=e.e,A=e.S,E=e.aS,T=e.P,D=e.J,N=e.k,_=e.aT,C=e.ai,P=e.M,R=e.b,I=e.h,z=e.R,L=e.ak},e=>{$=e.M},e=>{M=e.N},e=>{H=e.B},null,null,null],execute:function(){var r=document.createElement("style");r.textContent='.empty-state[data-v-d02eedc6]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem}.material-icons[data-v-d02eedc6]{font-size:1.1em}.empty-state .material-icons[data-v-d02eedc6]{font-size:3rem;margin-bottom:1rem}.wrapper[data-v-d02eedc6]{display:flex;min-height:100vh;box-sizing:border-box}.user-lists-page[data-v-d02eedc6]{flex:1;padding-top:20px;padding-bottom:40px;width:100%;margin:0 auto;box-sizing:border-box}.controls[data-v-d02eedc6]{display:flex;flex-direction:row;gap:8px;margin-bottom:20px;width:100%;align-items:center;justify-content:center;padding:0 15px;box-sizing:border-box}.filter-card[data-v-d02eedc6]{width:auto;background:rgba(37,37,37,.8);backdrop-filter:blur(10px);border-radius:12px;padding:6px;box-shadow:0 4px 16px rgba(0,0,0,.08);transition:all .3s ease;margin:0;box-sizing:border-box;border:1px solid rgba(255,255,255,.08)}.card-header[data-v-d02eedc6]{display:flex;gap:10px;margin-bottom:15px;position:relative}.card-title[data-v-d02eedc6]{font-weight:600;color:#e0e0e0;font-size:1.1em;position:relative;z-index:1}.card-title[data-v-d02eedc6]:after{content:"";position:absolute;bottom:-5px;left:0;right:0;height:2px;background:linear-gradient(90deg,#ff6b35,#f4c);border-radius:2px;opacity:.6;z-index:-1}.card-icon[data-v-d02eedc6]{font-size:18px;color:#ff6b35;transition:color .3s;margin-right:4px;opacity:.8}.type-card .card-icon[data-v-d02eedc6]{color:#4a90e2}.button-group[data-v-d02eedc6]{display:flex;gap:4px;flex-wrap:nowrap;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;justify-content:flex-start;align-items:center;padding:2px}.button-group[data-v-d02eedc6]::-webkit-scrollbar{display:none}.share-btn[data-v-d02eedc6],.clear-btn[data-v-d02eedc6]{padding:6px;border:1px solid rgba(255,255,255,.08);border-radius:8px;background:rgba(45,45,45,.6);color:#e0e0e0;cursor:pointer;font-weight:500;white-space:nowrap;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px rgba(0,0,0,.06);transition:all .2s ease}.share-btn[data-v-d02eedc6]:hover{background:rgba(58,58,58,.8);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1)}.clear-btn[data-v-d02eedc6]:hover:not(.disabled){background:rgba(58,58,58,.8);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1)}.filter-btn[data-v-d02eedc6]{padding:6px 12px;border:1px solid rgba(255,255,255,.08);border-radius:8px;background:rgba(45,45,45,.6);color:#e0e0e0;cursor:pointer;transition:all .2s ease;font-weight:500;font-size:.85em;white-space:nowrap;flex:0 1 auto;min-width:80px;box-shadow:0 2px 4px rgba(0,0,0,.06);box-sizing:border-box}.filter-btn[data-v-d02eedc6]:hover{background:rgba(58,58,58,.8);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1)}.type-btn.active[data-v-d02eedc6]{background:var(--accent-color);border-color:transparent;color:#fff;box-shadow:0 2px 8px var(--accent-transparent)}.counter[data-v-d02eedc6]{font-size:.8em;margin-left:6px;background:rgba(255,255,255,.1);padding:2px 6px;border-radius:10px;font-weight:500;color:#fff}.type-btn.active .counter[data-v-d02eedc6]{background:rgba(0,0,0,.2)}.filter-btn[data-v-d02eedc6]{display:flex;align-items:center;justify-content:center;gap:4px}@media(max-width:900px){.controls[data-v-d02eedc6]{flex-direction:column;gap:6px;padding:0 10px}.filter-card[data-v-d02eedc6]{width:100%}.button-group[data-v-d02eedc6]{flex-wrap:wrap;justify-content:center;gap:4px}}@media(max-width:480px){.controls[data-v-d02eedc6]{padding:0 5px;gap:4px}.filter-card[data-v-d02eedc6]{padding:4px;background:transparent;border:none;box-shadow:none}.button-group[data-v-d02eedc6]{gap:3px}.card-icon[data-v-d02eedc6]{display:none}}@media(max-width:400px){.button-group[data-v-d02eedc6]{flex-wrap:wrap;justify-content:center}}.filter-btn.disabled[data-v-d02eedc6],.share-btn.disabled[data-v-d02eedc6],.clear-btn.disabled[data-v-d02eedc6]{opacity:.6;cursor:not-allowed;pointer-events:none;transform:none!important}.filter-btn[data-v-d02eedc6]:disabled,.share-btn[data-v-d02eedc6]:disabled,.clear-btn[data-v-d02eedc6]:disabled{opacity:.6;cursor:not-allowed;pointer-events:none;transform:none!important}.hidden-file-input[data-v-d02eedc6]{display:none}\n/*$vite$:1*/',document.head.appendChild(r);var B={class:"wrapper"},F={class:"user-lists-page",tabindex:"0"},G={class:"controls"},U={class:"filter-card type-card"},q={class:"button-group type-buttons"},J=["disabled","onClick"],Y={key:0,class:"counter"},V=["disabled"],W=["disabled"],K=["disabled"],Q={class:"material-icons"},X=["disabled"],Z={key:0,class:"empty-state"},ee={__name:"UserLists",setup(e){var r=i([]),o=i(!0),ee=i(s.FAVORITE),te=i(""),re=i(null),ne=c(),ae=A(),oe=P(),ie=i(ae.params.user_id),le=i(!1),ue=i({}),se=p(),ce=i(null),de=i(!1),pe=i(null),ve=[s.FAVORITE,s.LATER,s.WATCHING,s.COMPLETED,s.ABANDONED,s.RATED,s.HISTORY],fe=N(()=>{var e;return!ie.value||String(ie.value)===String(null===(e=ne.user)||void 0===e?void 0:e.id)}),be=e=>{var t=Number(e);return Number.isInteger(t)&&t>0?t:null},ye=e=>Array.isArray(e)?e.map(e=>{var t,r,n=be(null==e?void 0:e.kp_id);return n?{kp_id:n,title:"string"==typeof(null==e?void 0:e.title)?e.title:"",year:null!==(t=null==e?void 0:e.year)&&void 0!==t?t:"",type:null!==(r=null==e?void 0:e.type)&&void 0!==r?r:"",poster:"string"==typeof(null==e?void 0:e.poster)?e.poster:"",addedAt:"string"!=typeof(null==e?void 0:e.addedAt)||Number.isNaN(Date.parse(e.addedAt))?(new Date).toISOString():e.addedAt}:null}).filter(Boolean):[],ge=(e,t)=>{var r=new Map,n=e=>{var t=r.get(e.kp_id);if(t){var n=Date.parse(t.addedAt||0);Date.parse(e.addedAt||0)>n&&r.set(e.kp_id,e)}else r.set(e.kp_id,e)};return ye(e).forEach(n),ye(t).forEach(n),Array.from(r.values()).sort((e,t)=>Date.parse(t.addedAt)-Date.parse(e.addedAt))},he=function(){var e=d(u().m(function e(){var t;return u().w(function(e){for(;;)switch(e.n){case 0:if(ne.token){e.n=1;break}throw new Error("Необходимо авторизоваться");case 1:return t={},e.n=2,Promise.allSettled(ve.map(function(){var e=d(u().m(function e(t){var r,n;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T(t);case 1:return r=e.v,n=Array.isArray(r)?[...new Set(r.map(e=>be(null==e?void 0:e.kp_id)).filter(Boolean))]:[],e.a(2,{type:t,ids:n})}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return e.v.forEach((e,r)=>{var n=ve[r];t[n]="fulfilled"===e.status?e.value.ids:[]}),e.a(2,{format:"reyohoho-user-data",version:1,exportedAt:(new Date).toISOString(),data:{serverLists:t,localHistory:ye(se.history)}})}},e)}));return function(){return e.apply(this,arguments)}}(),me=e=>{var t=new window.Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(t),n=document.createElement("a"),a=(new Date).toISOString().slice(0,10);n.href=r,n.download=`reyohoho-export-${a}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)},we=function(){var e=d(u().m(function e(){var t,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(fe.value){e.n=1;break}return e.a(2);case 1:return e.p=1,o.value=!0,e.n=2,he();case 2:t=e.v,me(t),pe.value.showNotification("Экспорт сохранен"),e.n=4;break;case 3:e.p=3,r=e.v,pe.value.showNotification((null==r?void 0:r.message)||"Ошибка при экспорте");case 4:return e.p=4,o.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),xe=()=>{var e;fe.value&&(null===(e=ce.value)||void 0===e||e.click())},ke=e=>{var t,r,n=e&&"object"===l(e)?e:{},a=(null==n||null===(t=n.data)||void 0===t?void 0:t.serverLists)||(null==n?void 0:n.serverLists)||(null==n?void 0:n.lists)||{},o=(null==n||null===(r=n.data)||void 0===r?void 0:r.localHistory)||(null==n?void 0:n.localHistory)||(null==n?void 0:n.history)||[],i={};return ve.forEach(e=>{var t=Array.isArray(a[e])?[...new Set(a[e].map(be).filter(Boolean))]:[];i[e]=t}),{lists:i,localHistory:ye(o)}},je=function(){var e=d(u().m(function e(t){var r,n,o,i,l,s,c,d,p,v,f,b,y,g,h;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(ne.token){e.n=1;break}throw new Error("Необходимо авторизоваться для импорта списков");case 1:r=0,n=0,o={},i=0,l=ve;case 2:if(!(i<l.length)){e.n=7;break}return s=l[i],e.p=3,e.n=4,T(s);case 4:c=e.v,o[s]=new Set((Array.isArray(c)?c:[]).map(e=>be(null==e?void 0:e.kp_id)).filter(Boolean)),e.n=6;break;case 5:e.p=5,e.v,o[s]=new Set;case 6:i++,e.n=2;break;case 7:d=0,p=ve;case 8:if(!(d<p.length)){e.n=19;break}v=p[d],f=t[v]||[],b=a(f),e.p=9,b.s();case 10:if((y=b.n()).done){e.n=15;break}if(g=y.value,!o[v].has(g)){e.n=11;break}return e.a(3,14);case 11:return e.p=11,e.n=12,C(g,v);case 12:o[v].add(g),r+=1,e.n=14;break;case 13:e.p=13,e.v,n+=1;case 14:e.n=10;break;case 15:e.n=17;break;case 16:e.p=16,h=e.v,b.e(h);case 17:return e.p=17,b.f(),e.f(17);case 18:d++,e.n=8;break;case 19:return e.a(2,{addedCount:r,failedCount:n})}},e,null,[[11,13],[9,16,17,18],[3,5]])}));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=d(u().m(function e(t){var r,a,i,l,s,c,d,p,v,f,b,y,g,h,m;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=t.target.files||[],a=n(r,1),i=a[0],t.target.value="",i&&fe.value){e.n=1;break}return e.a(2);case 1:return e.p=1,de.value=!0,o.value=!0,e.n=2,i.text();case 2:if(l=e.v,s=JSON.parse(l),c=ke(s),d=ve.some(e=>(c.lists[e]||[]).length>0),p=c.localHistory.length>0,d||p){e.n=3;break}return pe.value.showNotification("Файл импорта пустой или невалидный"),e.a(2);case 3:if(v=[],!d){e.n=5;break}return e.n=4,je(c.lists);case 4:f=e.v,b=f.addedCount,y=f.failedCount,v.push(`списки: +${b}`),y>0&&v.push(`ошибок: ${y}`);case 5:return p&&(g=se.history.length,h=ge(se.history,c.localHistory),se.setHistory(h),m=Math.max(0,h.length-g),v.push(`история: +${m}`)),e.n=6,Te();case 6:pe.value.showNotification(v.length?`Импорт завершен (${v.join(", ")})`:"Импорт завершен"),e.n=8;break;case 7:e.p=7,e.v,pe.value.showNotification("Ошибка импорта: проверьте формат JSON");case 8:return e.p=8,de.value=!1,o.value=!1,e.f(8);case 9:return e.a(2)}},e,null,[[1,7,8,9]])}));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=d(u().m(function e(){var t,r,n,a,o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=window.location.origin+window.location.pathname.split("/lists")[0]+"/lists",n=ie.value||(null===(t=ne.user)||void 0===t?void 0:t.id),a=ae.query.type||ee.value,o=n?`${r}/${n}?type=${a}`:`${r}?type=${a}`,e.n=1,navigator.clipboard.writeText(o);case 1:pe.value.showNotification("Скопировано"),e.n=3;break;case 2:e.p=2,i=e.v,console.error("Ошибка копирования:",i);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Ae=[{label:"Избранное",value:s.FAVORITE},{label:"Смотрю",value:s.WATCHING},{label:"Позже",value:s.LATER},{label:"Просмотрено",value:s.COMPLETED},{label:"Брошено",value:s.ABANDONED},{label:"Оценено",value:s.RATED}],Ee=function(){var e=d(u().m(function e(){var t,r,n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!(r=ie.value||(null===(t=ne.user)||void 0===t?void 0:t.id))){e.n=2;break}return e.n=1,_(r);case 1:ue.value=e.v;case 2:e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error fetching counters:",n);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=d(u().m(function e(){var t,n,a,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o.value=!0,te.value="",re.value=null,e.p=1,!ie.value){e.n=3;break}return e.n=2,E(ee.value,ie.value);case 2:r.value=e.v,e.n=5;break;case 3:return e.n=4,T(ee.value);case 4:r.value=e.v;case 5:return e.n=6,Ee();case 6:e.n=8;break;case 7:e.p=7,i=e.v,t=D(i),n=t.message,a=t.code,te.value=n,re.value=a,r.value=[];case 8:return e.p=8,o.value=!1,e.f(8);case 9:return e.a(2)}},e,null,[[1,7,8,9]])}));return function(){return e.apply(this,arguments)}}(),De=function(){var e=d(u().m(function e(){var t,n,a,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o.value=!0,!ne.token){e.n=6;break}return e.p=1,e.n=2,z(ee.value);case 2:return r.value=[],pe.value.showNotification("Список очищен"),e.n=3,Ee();case 3:e.n=6;break;case 4:if(e.p=4,i=e.v,t=D(i),n=t.message,a=t.code,te.value=n,re.value=a,console.error("Ошибка при очистке списка:",i),401!==a){e.n=6;break}return ne.logout(),e.n=5,oe.push("/login");case 5:oe.go(0);case 6:o.value=!1,le.value=!1;case 7:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=d(u().m(function e(t){var n,a,o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!ne.token){e.n=6;break}return e.p=1,e.n=2,L(t,ee.value);case 2:return r.value=r.value.filter(e=>e.kp_id!==t),pe.value.showNotification("Фильм удален из списка"),e.n=3,Ee();case 3:e.n=6;break;case 4:if(e.p=4,i=e.v,n=D(i),a=n.message,o=n.code,te.value=a,re.value=o,console.error("Ошибка при удалении фильма:",i),401!==o){e.n=6;break}return ne.logout(),e.n=5,oe.push("/login");case 5:oe.go(0);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}();return v(()=>ae.query.type,e=>{e&&Object.values(s).includes(e)&&(ee.value=e,Te())}),f(()=>{var e=ae.query.type;e&&Object.values(s).includes(e)&&(ee.value=e),Te()}),(e,n)=>{var a;return R(),b(g,null,[y("div",B,[y("div",F,[y("div",G,[y("div",U,[y("div",q,[n[6]||(n[6]=y("i",{class:"material-icons card-icon"},"movie",-1)),(R(),b(g,null,h(Ae,(e,r)=>y("button",{key:r,class:k(["filter-btn type-btn",{active:ee.value===e.value,disabled:o.value}]),disabled:o.value,onClick:r=>{return n=e.value,ee.value=n,void oe.push({query:t(t({},ae.query),{},{type:n})});var n}},[I(m(e.label)+" ",1),ue.value[e.value]?(R(),b("span",Y,m(ue.value[e.value]),1)):w("",!0)],10,J)),64)),y("button",{class:"share-btn",disabled:o.value,title:"Поделиться списком",onClick:n[0]||(n[0]=e=>Se())},[...n[3]||(n[3]=[y("span",{class:"material-icons"},m("share"),-1)])],8,V),fe.value?(R(),b("button",{key:0,class:"share-btn",disabled:o.value,title:"Экспортировать",onClick:we},[...n[4]||(n[4]=[y("span",{class:"material-icons"},m("download"),-1)])],8,W)):w("",!0),fe.value?(R(),b("button",{key:1,class:"share-btn",disabled:o.value||de.value,title:"Импортировать",onClick:xe},[y("span",Q,m(de.value?"hourglass_top":"upload"),1)],8,K)):w("",!0),ie.value&&String(ie.value)!==String(null===(a=x(ne).user)||void 0===a?void 0:a.id)?w("",!0):(R(),b("button",{key:2,class:k(["clear-btn",{disabled:!r.value.length||ee.value===x(s).RATED||o.value}]),disabled:!r.value.length||ee.value===x(s).RATED||o.value,title:"Очистить список",onClick:n[1]||(n[1]=e=>r.value.length&&ee.value!==x(s).RATED&&(le.value=!0))},[...n[5]||(n[5]=[y("span",{class:"material-icons"},m("delete_sweep"),-1)])],10,X))])])]),y("input",{ref_key:"importFileInput",ref:ce,type:"file",accept:"application/json,.json",class:"hidden-file-input",onChange:Oe},null,544),0!==r.value.length||o.value?te.value?w("",!0):(R(),j(x($),{key:1,"movies-list":r.value,"is-history":!1,"is-mobile":x(se).isMobile,"is-user-list":!0,"show-delete":ee.value!==x(s).RATED,"show-star":ee.value===x(s).RATED,loading:o.value,onItemDeleted:Ne},null,8,["movies-list","is-mobile","show-delete","show-star","loading"])):(R(),b("div",Z,[...n[7]||(n[7]=[y("span",{class:"material-icons"},"movie",-1),y("p",null,"Нет фильмов для отображения",-1)])])),te.value?(R(),j(O,{key:2,message:te.value,code:re.value},null,8,["message","code"])):w("",!0)])]),S(M,{ref_key:"notificationRef",ref:pe},null,512),S(H,{"is-open":le.value,message:"Вы уверены, что хотите очистить список?",onConfirm:De,onClose:n[2]||(n[2]=e=>le.value=!1)},null,8,["is-open"])],64)}}};e("default",o(ee,[["__scopeId","data-v-d02eedc6"]]))}}})}();
