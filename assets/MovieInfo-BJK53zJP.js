import{_ as ze,v as Dt,c as P,r as m,o as rt,A as Le,X as En,b as a,j as f,d as e,u as te,Y as Tt,F as Z,f as ne,t as c,i,n as S,Z as oo,z as so,B as Me,s as ut,$ as Se,G as qt,a0 as lo,a1 as io,a2 as ao,a3 as Ln,e as X,w as Ft,p as ie,l as A,a4 as bt,k as Ht,m as Je,x as Mn,a5 as ro,a6 as uo,a7 as co,a8 as vo,a9 as mo,aa as kn,ab as fo,S as go,ac as ko,a as Vt,ad as St,E as yo,D as z,ae as It,U as ee,af as yn,ag as hn,ah as ho,ai as bo,O as po,aj as bn,K as ce,ak as _o,al as wo,am as Co,an as Eo,ao as Lo,ap as Mo,aq as So,ar as Io,as as To,at as xo,au as qe,av as Ro,aw as No,ax as Po,ay as jo,az as Bo,aA as Uo}from"./index-zIAJSTba.js";import{a as pn,b as _n}from"./icon-imdb-logo-5qtstUwS.js";import{P as wn,M as Ao,_ as ht,a as Oo}from"./MovieRating-D9jGV7lT.js";import{M as Cn}from"./MovieList-D3PCXKxc.js";import{S as Vo}from"./SpinnerLoading-BEBh3VBV.js";import{u as Fo}from"./player-CltliSvs.js";import{N as Sn}from"./ToastMessage-D9A-9KAK.js";import{u as Ho}from"./trailer-CSYjKdKn.js";import{u as In}from"./useCommentFormatting-BB6uXsoL.js";const Do={key:0,class:"carousel-container"},qo={class:"carousel-wrapper"},zo=["onClick"],Wo=["src","alt"],Ko={class:"video-name"},Go={key:0,class:"video-player"},Yo=["src"],Zo={__name:"TrailerCarousel",props:{videos:{type:Array,required:!0},activeVideoIndex:{type:Number,default:null}},emits:["select"],setup(u,{emit:n}){const d=Dt(),o=P(()=>d.isMobile),C=u,b=n,g=m(C.activeVideoIndex),h=m(null),_=m(!1),E=m(!1),k=()=>{if(!h.value)return;const{scrollLeft:I,scrollWidth:L,clientWidth:j}=h.value;_.value=I>0,E.value=I<L-j-1},s=I=>{if(!h.value)return;const L=h.value.querySelector(".carousel-item");if(!L)return;const j=L.clientWidth+16;h.value.scrollBy({left:j*I,behavior:"smooth"})},w=I=>{g.value=I,b("select",C.videos[I])},B=()=>k(),v=m([]),T=async I=>{try{return(await fetch("https://img.youtube.com/vi/".concat(I,"/0.jpg"))).ok}catch(L){return!1}};return rt(async()=>{const I=C.videos.map(async j=>await T(j.videoId)?j:null),L=await Promise.all(I);v.value=L.filter(Boolean),k(),window.addEventListener("resize",B)}),Le(()=>C.videos,async I=>{const L=I.map(async W=>await T(W.videoId)?W:null),j=await Promise.all(L);v.value=j.filter(Boolean)}),Le(()=>C.activeVideoIndex,I=>{g.value=I}),En(()=>{window.removeEventListener("resize",B)}),(I,L)=>v.value.length?(i(),a("div",Do,[L[4]||(L[4]=e("h2",null,"–¢—Ä–µ–π–ª–µ—Ä—ã (YouTube)",-1)),e("div",qo,[te(e("button",{class:"scroll-button left",onClick:L[0]||(L[0]=j=>s(-1))},L[2]||(L[2]=[e("span",{class:"material-symbols-outlined"},"arrow_back_ios",-1)]),512),[[Tt,!o.value&&_.value]]),e("div",{ref_key:"carousel",ref:h,class:"carousel",onScroll:k},[(i(!0),a(Z,null,ne(v.value,(j,W)=>(i(),a("div",{key:W,class:"carousel-item",onClick:H=>w(W)},[e("img",{src:"https://img.youtube.com/vi/".concat(j.videoId,"/0.jpg"),alt:j.name},null,8,Wo),e("div",Ko,c(j.name),1)],8,zo))),128))],544),te(e("button",{class:"scroll-button right",onClick:L[1]||(L[1]=j=>s(1))},L[3]||(L[3]=[e("span",{class:"material-symbols-outlined"},"arrow_forward_ios",-1)]),512),[[Tt,!o.value&&E.value]])]),g.value!==null?(i(),a("div",Go,[e("iframe",{src:u.videos[g.value].iframeUrl,frameborder:"0",allowfullscreen:""},null,8,Yo)])):f("",!0)])):f("",!0)}},Qo=ze(Zo,[["__scopeId","data-v-4a5806b3"]]),Xo={name:"EmojiPicker",props:{isVisible:{type:Boolean,default:!1}},emits:["emoji-selected","mouse-enter","mouse-leave","close"],data(){return{activeCategory:"smileys",categories:[{name:"smileys",icon:"üòÄ",emojis:["üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòõ","üòù","üòú","ü§™","ü§®","üßê","ü§ì","üòé","ü§©","ü•≥"]},{name:"emotions",icon:"üò¢",emojis:["üò•","üò¢","üò≠","üò§","üò†","üò°","ü§¨","ü§Ø","üò≥","ü•µ","ü•∂","üò±","üò®","üò∞","üò•","üòì","ü§ó","ü§î","ü§≠","ü§´","ü§•","üò∂","üòê","üòë","üò¨","üôÑ","üòØ","üò¶","üòß","üòÆ","üò≤"]},{name:"gestures",icon:"üëç",emojis:["üëç","üëé","üëå","ü§å","ü§è","‚úåÔ∏è","ü§û","ü§ü","ü§ò","ü§ô","üëà","üëâ","üëÜ","üñï","üëá","‚òùÔ∏è","üëè","üôå","üëê","ü§≤","ü§ù","üôè","‚úçÔ∏è","üí™","ü¶æ","ü¶ø","ü¶µ","ü¶∂","üëÇ","ü¶ª","üëÉ"]},{name:"hearts",icon:"‚ù§Ô∏è",emojis:["‚ù§Ô∏è","üß°","üíõ","üíö","üíô","üíú","ü§é","üñ§","ü§ç","üíî","‚ù£Ô∏è","üíï","üíû","üíì","üíó","üíñ","üíò","üíù","üíü","‚ô•Ô∏è","üíØ","üí¢","üí•","üí´","üí¶","üí®","üï≥Ô∏è","üí£","üí¨","üëÅÔ∏è‚Äçüó®Ô∏è","üó®Ô∏è"]},{name:"objects",icon:"üéâ",emojis:["üéâ","üéä","üéà","üéÅ","üéÄ","üéÇ","üç∞","üßÅ","üç≠","üç¨","üç´","üç©","üç™","üçï","üçî","üçü","üå≠","ü•™","üåÆ","üåØ","ü•ô","ü•ö","üç≥","ü•ò","üç≤","ü•ó","üçø","üßà","üßÄ","ü•®","ü•Ø"]}]}},computed:{currentEmojis(){const u=this.categories.find(n=>n.name===this.activeCategory);return u?u.emojis:[]}},methods:{selectEmoji(u){this.$emit("emoji-selected",u)}}},Jo={class:"emoji-categories"},$o=["onClick"],es={class:"emoji-grid"},ts=["onClick"];function ns(u,n,d,o,C,b){return d.isVisible?(i(),a("div",{key:0,class:"emoji-picker",onMouseenter:n[1]||(n[1]=g=>u.$emit("mouse-enter")),onMouseleave:n[2]||(n[2]=g=>u.$emit("mouse-leave"))},[e("button",{class:"close-btn mobile-only",onClick:n[0]||(n[0]=g=>u.$emit("close"))},n[3]||(n[3]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",Jo,[(i(!0),a(Z,null,ne(C.categories,g=>(i(),a("button",{key:g.name,class:S([{active:C.activeCategory===g.name},"category-btn"]),type:"button",onClick:h=>C.activeCategory=g.name},c(g.icon),11,$o))),128))]),e("div",es,[(i(!0),a(Z,null,ne(b.currentEmojis,g=>(i(),a("button",{key:g,class:"emoji-btn",type:"button",onClick:h=>b.selectEmoji(g)},c(g),9,ts))),128))])],32)):f("",!0)}const zt=ze(Xo,[["render",ns],["__scopeId","data-v-c92f1773"]]),os=async u=>{const n=await oo();return await u(n)},ss=async u=>{const{data:n}=await os(d=>d.get("/search_emotes/".concat(u)));return n.emotes||[]},ls={name:"ImagePicker",props:{isVisible:{type:Boolean,required:!0},currentUser:{type:Object,default:null}},emits:["image-selected","mouse-enter","mouse-leave","close","login-required"],setup(u,{emit:n}){const d=m(""),o=m([]),C=m(null),b=m(!1),h=so(async s=>{if(!u.currentUser){console.warn("–ü–æ–ø—ã—Ç–∫–∞ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");return}if(!s.trim()){o.value=[],b.value=!1;return}b.value=!0;try{o.value=await ss(s)}catch(w){console.error("Error searching images:",w),o.value=[]}finally{b.value=!1}},300),_=()=>{if(!u.currentUser){n("login-required");return}d.value.trim()&&(b.value=!0),h(d.value)},E=s=>{if(!u.currentUser){n("login-required");return}n("image-selected",s),n("close")},k=()=>{setTimeout(()=>{u.isVisible&&n("mouse-leave")},100)};return Le(()=>u.isVisible,s=>{s&&(d.value="",o.value=[],b.value=!1)}),{searchQuery:d,images:o,searchInput:C,isLoading:b,handleSearch:_,selectImage:E,handleInputBlur:k}}},is={key:0,class:"auth-required"},as={class:"auth-message"},rs={key:1},us={class:"image-picker-header"},ds={class:"image-content"},cs={key:0,class:"loading-spinner"},vs={key:1,class:"image-grid"},ms=["onClick"],fs=["src","alt"],gs={key:2,class:"no-images"},ks={key:3,class:"no-search"};function ys(u,n,d,o,C,b){return d.isVisible?(i(),a("div",{key:0,class:"image-picker",onMouseenter:n[7]||(n[7]=g=>u.$emit("mouse-enter")),onMouseleave:n[8]||(n[8]=g=>u.$emit("mouse-leave")),onClick:n[9]||(n[9]=ut(()=>{},["stop"]))},[e("button",{class:"close-btn mobile-only",onClick:n[0]||(n[0]=g=>u.$emit("close"))},n[10]||(n[10]=[e("i",{class:"fas fa-times"},null,-1)])),d.currentUser?(i(),a("div",rs,[e("div",us,[te(e("input",{ref:"searchInput","onUpdate:modelValue":n[2]||(n[2]=g=>o.searchQuery=g),type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞–π–ª–∞ 7tv",class:"image-search-input",onInput:n[3]||(n[3]=(...g)=>o.handleSearch&&o.handleSearch(...g)),onClick:n[4]||(n[4]=ut(()=>{},["stop"])),onFocus:n[5]||(n[5]=g=>u.$emit("mouse-enter")),onBlur:n[6]||(n[6]=(...g)=>o.handleInputBlur&&o.handleInputBlur(...g))},null,544),[[Me,o.searchQuery]])]),e("div",ds,[o.isLoading?(i(),a("div",cs,n[14]||(n[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"–ü–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...",-1)]))):o.images.length>0?(i(),a("div",vs,[(i(!0),a(Z,null,ne(o.images,(g,h)=>(i(),a("div",{key:h,class:"image-item",onClick:_=>o.selectImage(g)},[e("img",{src:g,alt:"Image "+(h+1)},null,8,fs)],8,ms))),128))])):o.searchQuery.trim()?(i(),a("div",gs,n[15]||(n[15]=[e("p",null,"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",-1)]))):(i(),a("div",ks,n[16]||(n[16]=[e("p",null,"–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞",-1)])))])])):(i(),a("div",is,[e("div",as,[n[11]||(n[11]=e("i",{class:"fas fa-lock"},null,-1)),n[12]||(n[12]=e("h3",null,"–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",-1)),n[13]||(n[13]=e("p",null,"–î–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç",-1)),e("button",{class:"login-button",onClick:n[1]||(n[1]=g=>u.$emit("login-required"))},"–í–æ–π—Ç–∏")])]))],32)):f("",!0)}const Wt=ze(ls,[["render",ys],["__scopeId","data-v-01784edf"]]),hs={name:"LinkModal",props:{isVisible:{type:Boolean,default:!1},selectedText:{type:String,default:""}},emits:["close","submit"],setup(u,{emit:n}){const d=m(""),o=m(""),C=m(null),b=m(null),g=P(()=>/^https?:\/\/.+/.test(d.value.trim())&&o.value.trim()),h=()=>{n("close"),E()},_=()=>{g.value&&(n("submit",{url:d.value.trim(),title:o.value.trim()}),h())},E=()=>{d.value="",o.value=""},k=s=>{var w;s.key==="Enter"?(s.preventDefault(),g.value?_():s.target===C.value&&d.value.trim()&&((w=b.value)==null||w.focus())):s.key==="Escape"&&h()};return Le(()=>u.isVisible,s=>{s&&(u.selectedText.trim()&&(o.value=u.selectedText.trim()),Se(()=>{var w;(w=C.value)==null||w.focus()}))}),{linkUrl:d,linkTitle:o,urlInput:C,titleInput:b,isValidLink:g,closeModal:h,submitLink:_,handleKeydown:k}}},bs={class:"link-modal-header"},ps={class:"link-modal-content"},_s={class:"form-group"},ws={class:"form-group"},Cs={class:"link-modal-footer"},Es=["disabled"];function Ls(u,n,d,o,C,b){return d.isVisible?(i(),a("div",{key:0,class:"link-modal-overlay",onClick:n[8]||(n[8]=(...g)=>o.closeModal&&o.closeModal(...g))},[e("div",{class:"link-modal",onClick:n[7]||(n[7]=ut(()=>{},["stop"]))},[e("div",bs,[n[10]||(n[10]=e("h3",null,"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",-1)),e("button",{class:"close-button",onClick:n[0]||(n[0]=(...g)=>o.closeModal&&o.closeModal(...g))},n[9]||(n[9]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",ps,[e("div",_s,[n[11]||(n[11]=e("label",{for:"link-url"},"URL —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-url",ref:"urlInput","onUpdate:modelValue":n[1]||(n[1]=g=>o.linkUrl=g),type:"url",placeholder:"https://example.com",class:"link-input",onKeydown:n[2]||(n[2]=(...g)=>o.handleKeydown&&o.handleKeydown(...g))},null,544),[[Me,o.linkUrl]])]),e("div",ws,[n[12]||(n[12]=e("label",{for:"link-title"},"–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏:",-1)),te(e("input",{id:"link-title",ref:"titleInput","onUpdate:modelValue":n[3]||(n[3]=g=>o.linkTitle=g),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",class:"link-input",onKeydown:n[4]||(n[4]=(...g)=>o.handleKeydown&&o.handleKeydown(...g))},null,544),[[Me,o.linkTitle]])])]),e("div",Cs,[e("button",{class:"cancel-button",onClick:n[5]||(n[5]=(...g)=>o.closeModal&&o.closeModal(...g))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!o.isValidLink,onClick:n[6]||(n[6]=(...g)=>o.submitLink&&o.submitLink(...g))},"–î–æ–±–∞–≤–∏—Ç—å",8,Es)])])])):f("",!0)}const Kt=ze(hs,[["render",Ls],["__scopeId","data-v-a794d83f"]]);function Ms(){const u=m(!1),n=m(!1),d=m(!1),o=()=>{n.value=!0},C=()=>{n.value=!1,setTimeout(()=>{!n.value&&!d.value&&(u.value=!1)},300)},b=()=>{d.value=!0,u.value=!0},g=()=>{d.value=!1,setTimeout(()=>{!n.value&&!d.value&&(u.value=!1)},300)},h=()=>{u.value=!1};return{showEmojiPicker:u,isEmojiHovered:n,isButtonHovered:d,handleEmojiMouseEnter:o,handleEmojiMouseLeave:C,handleButtonMouseEnter:b,handleButtonMouseLeave:g,closeEmojiPicker:h,insertEmoji:(k,s,w,B)=>{const v=s.value;if(v){const T=v.selectionStart,I=v.selectionEnd,L=w.value.substring(0,T),j=w.value.substring(I),W=L+k+j;B(W),Se(()=>{v.focus(),v.setSelectionRange(T+k.length,T+k.length),v.style.height&&(v.style.height="auto",v.style.height="".concat(Math.min(v.scrollHeight,200),"px"))})}else B(w.value+k)},handleGlobalClick:k=>{!k.target.closest(".emoji-picker")&&!k.target.closest(".emoji-button-inline")&&h()}}}function Ss(){const u=m(!1),n=m(!1),d=m(!1),o=()=>{n.value=!0},C=()=>{n.value=!1,setTimeout(()=>{!n.value&&!d.value&&(u.value=!1)},300)},b=()=>{d.value=!0,u.value=!0},g=()=>{d.value=!1,setTimeout(()=>{!n.value&&!d.value&&(u.value=!1)},300)},h=()=>{u.value=!1};return{showImagePicker:u,isImageHovered:n,isButtonHovered:d,handleImageMouseEnter:o,handleImageMouseLeave:C,handleImageButtonMouseEnter:b,handleButtonMouseLeave:g,closeImagePicker:h,insertImage:(k,s,w,B)=>{const v=s.value;if(v){const T=v.selectionStart,I=v.selectionEnd,L="[img]".concat(k,"[/img]"),j=w.value.slice(0,T)+L+w.value.slice(I);B(j),Se(()=>{v.focus(),v.setSelectionRange(T+L.length,T+L.length),v.style.height&&(v.style.height="auto",v.style.height="".concat(Math.min(v.scrollHeight,200),"px"))})}else{const T="[img]".concat(k,"[/img]");B(w.value+T)}},handleGlobalClick:k=>{!k.target.closest(".image-picker")&&!k.target.closest(".emoji-button-inline")&&h()}}}function Is(){const u=m(!1),n=m("");return{showLinkModal:u,selectedTextForLink:n,insertLink:(g,h)=>{const _=g.value;if(_){const E=_.selectionStart,k=_.selectionEnd,s=h.value.slice(E,k);n.value=s.trim()||""}u.value=!0},insertLinkFromModal:(g,h,_,E)=>{const k=h.value;if(k){const s=k.selectionStart,w=k.selectionEnd,B="[link=".concat(g.url,"]").concat(g.title,"[/link]"),v=_.value.slice(0,s)+B+_.value.slice(w);E(v),Se(()=>{k.focus(),k.setSelectionRange(s+B.length,s+B.length),k.style.height&&(k.style.height="auto",k.style.height="".concat(Math.min(k.scrollHeight,200),"px"))})}},closeLinkModal:()=>{u.value=!1},insertSpoiler:(g,h,_)=>{const E=g.value;if(E){const k=E.selectionStart,s=E.selectionEnd,w=h.value.slice(k,s);let B;w.trim()?B="[spoiler]".concat(w,"[/spoiler]"):B="[spoiler][/spoiler]";const v=h.value.slice(0,k)+B+h.value.slice(s);_(v),Se(()=>{if(E.focus(),w.trim())E.setSelectionRange(k+B.length,k+B.length);else{const T=k+9;E.setSelectionRange(T,T)}E.style.height&&(E.style.height="auto",E.style.height="".concat(Math.min(E.scrollHeight,200),"px"))})}}}}function Ts(){return{autoResize:d=>{const o=d==null?void 0:d.target;o&&(o.style.height="auto",o.style.height="".concat(Math.min(o.scrollHeight,200),"px"))},autoResizeElement:d=>{d&&(d.style.height="auto",d.style.height="".concat(Math.min(d.scrollHeight,200),"px"))}}}function Gt(){const u=Ms(),n=Ss(),d=Is(),{autoResize:o,autoResizeElement:C}=Ts(),b=()=>{u.isButtonHovered.value=!0,n.isButtonHovered.value=!0,u.showEmojiPicker.value=!0,n.showImagePicker.value=!1},g=()=>{u.isButtonHovered.value=!0,n.isButtonHovered.value=!0,n.showImagePicker.value=!0,u.showEmojiPicker.value=!1},h=()=>{u.isButtonHovered.value=!1,n.isButtonHovered.value=!1,setTimeout(()=>{!u.isEmojiHovered.value&&!n.isImageHovered.value&&!u.isButtonHovered.value&&!n.isButtonHovered.value&&(u.showEmojiPicker.value=!1,n.showImagePicker.value=!1)},300)},_=()=>{u.showEmojiPicker.value=!1,n.showImagePicker.value=!1},E=T=>{!T.target.closest(".emoji-picker")&&!T.target.closest(".image-picker")&&!T.target.closest(".emoji-button-inline")&&_()},k=(T,I,L,j)=>{u.insertEmoji(T,I,L,j)},s=(T,I,L,j)=>{n.insertImage(T,I,L,j)},w=(T,I,L)=>{d.insertLink(T,I,L)},B=(T,I,L,j)=>{d.insertLinkFromModal(T,I,L,j)},v=(T,I,L)=>{d.insertSpoiler(T,I,L)};return rt(()=>{document.addEventListener("click",E)}),En(()=>{document.removeEventListener("click",E)}),{showEmojiPicker:u.showEmojiPicker,handleEmojiMouseEnter:u.handleEmojiMouseEnter,handleEmojiMouseLeave:u.handleEmojiMouseLeave,closeEmojiPicker:u.closeEmojiPicker,showImagePicker:n.showImagePicker,handleImageMouseEnter:n.handleImageMouseEnter,handleImageMouseLeave:n.handleImageMouseLeave,closeImagePicker:n.closeImagePicker,showLinkModal:d.showLinkModal,selectedTextForLink:d.selectedTextForLink,closeLinkModal:d.closeLinkModal,handleButtonMouseEnter:b,handleImageButtonMouseEnter:g,handleButtonMouseLeave:h,closeAllPickers:_,insertEmojiUniversal:k,insertImageUniversal:s,insertLinkUniversal:w,insertLinkFromModalUniversal:B,insertSpoilerUniversal:v,autoResize:o,autoResizeElement:C}}const xs={name:"CommentItem",components:{EmojiPicker:zt,ImagePicker:Wt,LinkModal:Kt},props:{comment:{type:Object,default:()=>({name:"–ê–Ω–æ–Ω–∏–º",user_avatar:null,content:"",created_at:new Date().toISOString(),rating:0,replies:[]})},currentUser:{type:Object,default:()=>({})},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate"],setup(u,{emit:n}){var Ge,be;const d=qt(),o=P(()=>{var y;return u.editingCommentId===((y=u.comment)==null?void 0:y.id)}),C=m(((Ge=u.comment)==null?void 0:Ge.content)||""),b=m(((be=u.comment)==null?void 0:be.user_rating)||0),g=m(null),h=m(null),{showEmojiPicker:_,showImagePicker:E,showLinkModal:k,selectedTextForLink:s,handleEmojiMouseEnter:w,handleEmojiMouseLeave:B,handleImageMouseEnter:v,handleImageMouseLeave:T,handleButtonMouseEnter:I,handleImageButtonMouseEnter:L,handleButtonMouseLeave:j,closeEmojiPicker:W,closeImagePicker:H,closeLinkModal:ae,insertEmojiUniversal:fe,insertImageUniversal:se,insertLinkUniversal:x,insertLinkFromModalUniversal:ke,insertSpoilerUniversal:J,autoResize:Y}=Gt(),{formatContentWithTruncation:ye}=In();rt(async()=>{var y;if((y=u.comment)!=null&&y.user_avatar){const D=await lo();g.value="".concat(D).concat(u.comment.user_avatar)}});const R=P(()=>{var y;return u.currentUser&&((y=u.comment)==null?void 0:y.user_id)===u.currentUser.id}),ve=P(()=>{var y;return u.currentUser&&((y=u.comment)==null?void 0:y.user_id)===u.currentUser.id||u.currentUser&&u.currentUser.is_admin===1}),K=P(()=>{var y,D,xe;return((y=u.comment)==null?void 0:y.updated_at)&&((D=u.comment)==null?void 0:D.updated_at)!==((xe=u.comment)==null?void 0:xe.created_at)}),O=P(()=>{var y,D;return(y=u.comment)!=null&&y.is_deleted?!1:(((D=u.comment)==null?void 0:D.rating)||0)<=-3}),Ie=P(()=>O.value),$=m(!1),Pe=P(()=>{var y,D;return(y=u.comment)!=null&&y.is_deleted?null:(((D=u.comment)==null?void 0:D.rating)||0)<=-3?"lowRating":null}),je=()=>{var y,D;n("start-edit",(y=u.comment)==null?void 0:y.id),C.value=((D=u.comment)==null?void 0:D.content)||"",Se(()=>{h.value&&(h.value.focus(),Y({target:h.value}))})},Te=()=>{var y;n("cancel-edit"),C.value=((y=u.comment)==null?void 0:y.content)||""},$e=()=>{var y;C.value.trim()&&n("edit",(y=u.comment)==null?void 0:y.id,C.value.trim())},dt=()=>{var y;confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?")&&n("delete",(y=u.comment)==null?void 0:y.id)},et=y=>{var D,xe;b.value===y?(b.value=0,n("rate",(D=u.comment)==null?void 0:D.id,y)):(b.value=y,n("rate",(xe=u.comment)==null?void 0:xe.id,y))},ct=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),$e())},tt=P(()=>{var y;return ye((y=u.comment)==null?void 0:y.content)}),Be=()=>{console.log("Avatar load error, falling back to initials"),g.value=null,Se(()=>{const y=document.querySelector(".avatar-placeholder");y&&(y.style.display="flex")})},he=()=>{d.push("/login")},We=y=>{fe(y,h,C,D=>{C.value=D})},Ue=y=>{se(y,h,C,D=>{C.value=D})},Ke=()=>{J(h,C,y=>{C.value=y})},nt=()=>{x(h,C,y=>{C.value=y})},ot=y=>{ke(y,h,C,D=>{C.value=D})},me=y=>{Y(y)};return Le(C,()=>{o.value&&h.value&&Se(()=>{me({target:h.value})})}),{isEditing:o,editContent:C,userRating:b,isCommentOwner:R,canDeleteComment:ve,isCommentEdited:K,formatDate:Ln,formatRelativeTime:ao,startEdit:je,cancelEdit:Te,saveEdit:$e,confirmDelete:dt,rateComment:et,avatarUrl:g,getInitials:io,handleEditKeydown:ct,isCommentHidden:Ie,showHiddenComment:$,hiddenCommentReason:Pe,formattedContent:tt,autoResizeEdit:me,editTextarea:h,showEmojiPicker:_,showImagePicker:E,insertEmojiEdit:We,insertImageEdit:Ue,insertSpoilerEdit:Ke,insertLinkEdit:nt,handleEmojiMouseEnter:w,handleEmojiMouseLeave:B,handleImageMouseEnter:v,handleImageMouseLeave:T,closeEmojiPicker:W,closeImagePicker:H,handleButtonMouseEnter:I,handleButtonMouseLeave:j,handleImageButtonMouseEnter:L,handleAvatarError:Be,openLogin:he,showLinkModal:k,selectedTextForLink:s,insertLinkFromModal:ot,closeLinkModal:ae}}},Rs=["data-comment-id"],Ns={class:"comment-header"},Ps={class:"user-info"},js={class:"user-avatar"},Bs=["src","alt"],Us={class:"user-details"},As={class:"username"},Os={key:0,class:"user-rating"},Vs=["title"],Fs=["title"],Hs={class:"comment-content"},Ds={key:0,class:"hidden-comment-warning"},qs={key:1},zs={key:0,class:"deleted-comment"},Ws={key:1},Ks={key:0,class:"edit-form"},Gs={class:"edit-textarea-container"},Ys={class:"edit-footer"},Zs={class:"edit-actions"},Qs=["disabled"],Xs={class:"character-counter-container"},Js={key:1,class:"comment-text-container"},$s=["innerHTML"],el={class:"comment-footer"},tl={class:"comment-actions"},nl={class:"rating-buttons"},ol={class:"action-buttons"};function sl(u,n,d,o,C,b){var k,s,w,B,v,T,I,L,j,W,H,ae,fe,se,x,ke,J,Y,ye;const g=ie("router-link"),h=ie("EmojiPicker"),_=ie("ImagePicker"),E=ie("LinkModal");return i(),a("div",{class:"comment-item","data-comment-id":(k=d.comment)==null?void 0:k.id},[e("div",Ns,[e("div",Ps,[X(g,{to:{path:"/lists/".concat((s=d.comment)==null?void 0:s.user_id)},target:"_blank",rel:"noopener noreferrer",class:"user-avatar-link"},{default:Ft(()=>{var R,ve;return[e("div",js,[o.avatarUrl?(i(),a("img",{key:0,src:o.avatarUrl,alt:((R=d.comment)==null?void 0:R.name)||"–ê–Ω–æ–Ω–∏–º",onerror:"this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';",onError:n[0]||(n[0]=(...K)=>o.handleAvatarError&&o.handleAvatarError(...K))},null,40,Bs)):(i(),a("div",{key:1,class:"avatar-placeholder",style:Ht({display:o.avatarUrl?"none":"flex"})},c(o.getInitials(((ve=d.comment)==null?void 0:ve.name)||"–ê–Ω–æ–Ω–∏–º")),5))])]}),_:1},8,["to"]),e("div",Us,[X(g,{to:{path:"/lists/".concat((w=d.comment)==null?void 0:w.user_id)},target:"_blank",rel:"noopener noreferrer",class:"username-link"},{default:Ft(()=>{var R;return[e("span",As,c(((R=d.comment)==null?void 0:R.name)||"–ê–Ω–æ–Ω–∏–º"),1)]}),_:1},8,["to"]),(B=d.comment)!=null&&B.user_movie_rating?(i(),a("span",Os,[n[18]||(n[18]=e("i",{class:"fas fa-star"},null,-1)),A(" "+c(d.comment.user_movie_rating),1)])):f("",!0),e("span",{class:"date",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((v=d.comment)==null?void 0:v.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((T=d.comment)==null?void 0:T.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((I=d.comment)==null?void 0:I.created_at))},[A(c(o.formatRelativeTime((L=d.comment)==null?void 0:L.created_at))+" ",1),o.isCommentEdited?(i(),a("i",{key:0,class:"fas fa-pencil-alt edit-icon",title:o.isCommentEdited?"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((j=d.comment)==null?void 0:j.created_at),"\n–ò–∑–º–µ–Ω–µ–Ω–æ: ").concat(o.formatDate((W=d.comment)==null?void 0:W.updated_at)):"–°–æ–∑–¥–∞–Ω–æ: ".concat(o.formatDate((H=d.comment)==null?void 0:H.created_at))},null,8,Fs)):f("",!0)],8,Vs)])])]),e("div",Hs,[!((ae=d.comment)!=null&&ae.is_deleted)&&o.isCommentHidden&&!o.showHiddenComment?(i(),a("div",Ds,[o.hiddenCommentReason==="lowRating"?(i(),a("p",{key:0,class:"warning-text",onClick:n[1]||(n[1]=R=>o.showHiddenComment=!0)},n[19]||(n[19]=[e("i",{class:"fas fa-eye-slash"},null,-1),A(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–∫—Ä—ã—Ç –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å. ")]))):f("",!0)])):(i(),a("div",qs,[(fe=d.comment)!=null&&fe.is_deleted?(i(),a("div",zs,n[20]||(n[20]=[e("p",{class:"deleted-message"},[e("i",{class:"fas fa-trash"}),A(" –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —É–¥–∞–ª—ë–Ω ")],-1)]))):(i(),a("div",Ws,[o.isEditing?(i(),a("div",Ks,[e("div",Gs,[te(e("textarea",{ref:"editTextarea","onUpdate:modelValue":n[2]||(n[2]=R=>o.editContent=R),class:"edit-textarea",rows:"3",maxlength:"1500",onKeydown:n[3]||(n[3]=(...R)=>o.handleEditKeydown&&o.handleEditKeydown(...R)),onInput:n[4]||(n[4]=(...R)=>o.autoResizeEdit&&o.autoResizeEdit(...R))},null,544),[[Me,o.editContent]])]),e("div",Ys,[e("div",Zs,[e("button",{class:"cancel-button",onClick:n[5]||(n[5]=(...R)=>o.cancelEdit&&o.cancelEdit(...R))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"save-button",disabled:!o.editContent.trim()||o.editContent.length>1500,onClick:n[6]||(n[6]=(...R)=>o.saveEdit&&o.saveEdit(...R))}," –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",8,Qs)]),e("div",Xs,[e("div",{class:S(["character-counter-inline",{"near-limit":o.editContent.length>1400,"at-limit":o.editContent.length>=1500}])},c(o.editContent.length)+"/1500 ",3),e("button",{type:"button",class:S(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:n[7]||(n[7]=(...R)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...R)),onMouseleave:n[8]||(n[8]=(...R)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...R))}," üòä ",34),e("button",{type:"button",class:S(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:n[9]||(n[9]=(...R)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...R)),onMouseleave:n[10]||(n[10]=(...R)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...R))},n[21]||(n[21]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-61465cd5><g id="logo" data-v-61465cd5><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-61465cd5></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-61465cd5></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-61465cd5></path></g></svg>',1)]),34),e("button",{type:"button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä",class:"emoji-button-inline spoiler-button",onClick:n[11]||(n[11]=(...R)=>o.insertSpoilerEdit&&o.insertSpoilerEdit(...R))},n[22]||(n[22]=[e("i",{class:"fas fa-eye-slash"},null,-1)])),e("button",{type:"button",class:"emoji-button-inline link-button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",onClick:n[12]||(n[12]=(...R)=>o.insertLinkEdit&&o.insertLinkEdit(...R))},n[23]||(n[23]=[e("i",{class:"fas fa-link"},null,-1)])),X(h,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmojiEdit,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),X(_,{"is-visible":o.showImagePicker,"current-user":d.currentUser,onImageSelected:o.insertImageEdit,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:o.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),X(E,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):(i(),a("div",Js,[e("p",{class:"comment-text",innerHTML:o.formattedContent},null,8,$s)]))]))]))]),e("div",el,[e("div",tl,[e("div",nl,[!o.isCommentOwner&&!((se=d.comment)!=null&&se.is_deleted)?(i(),a("button",{key:0,class:S(["rating-button",{"rated-up":o.userRating===1}]),onClick:n[13]||(n[13]=R=>o.rateComment(1))},n[24]||(n[24]=[e("i",{class:"fas fa-thumbs-up"},null,-1)]),2)):f("",!0),e("span",{class:S(["rating-count",{"rating-positive":o.userRating===1,"rating-negative":o.userRating===-1}])},c(((x=d.comment)==null?void 0:x.rating)||0),3),!o.isCommentOwner&&!((ke=d.comment)!=null&&ke.is_deleted)?(i(),a("button",{key:1,class:S(["rating-button",{"rated-down":o.userRating===-1}]),onClick:n[14]||(n[14]=R=>o.rateComment(-1))},n[25]||(n[25]=[e("i",{class:"fas fa-thumbs-down"},null,-1)]),2)):f("",!0)]),e("div",ol,[!d.currentUser||d.currentUser.allow_comments===1?(i(),a("button",{key:0,class:"action-button reply-button",onClick:n[15]||(n[15]=R=>u.$emit("reply",d.comment))},n[26]||(n[26]=[e("i",{class:"fas fa-reply"},null,-1)]))):f("",!0),o.isCommentOwner&&!((J=d.comment)!=null&&J.is_deleted)&&!o.isEditing&&((Y=d.currentUser)==null?void 0:Y.allow_comments)===1?(i(),a("button",{key:1,class:"action-button edit-button",onClick:n[16]||(n[16]=(...R)=>o.startEdit&&o.startEdit(...R))},n[27]||(n[27]=[e("i",{class:"fas fa-edit"},null,-1)]))):f("",!0),o.canDeleteComment&&!((ye=d.comment)!=null&&ye.is_deleted)?(i(),a("button",{key:2,class:"action-button delete-button",onClick:n[17]||(n[17]=(...R)=>o.confirmDelete&&o.confirmDelete(...R))},n[28]||(n[28]=[e("i",{class:"fas fa-trash"},null,-1)]))):f("",!0)])])])],8,Rs)}const ll=ze(xs,[["render",sl],["__scopeId","data-v-61465cd5"]]),il={name:"CommentThread",components:{CommentItem:ll,EmojiPicker:zt,ImagePicker:Wt,LinkModal:Kt},props:{comment:{type:Object,required:!0},currentUser:{type:Object,required:!0},replyTo:{type:Object,default:null},replyContent:{type:String,default:""},editingCommentId:{type:Number,default:null}},emits:["reply","start-edit","cancel-edit","edit","delete","rate","submit-reply","cancel-reply","update-reply-content","reply-keydown"],setup(u,{emit:n}){const d=m(null),o=m(!0),{showEmojiPicker:C,showImagePicker:b,showLinkModal:g,selectedTextForLink:h,handleEmojiMouseEnter:_,handleEmojiMouseLeave:E,handleImageMouseEnter:k,handleImageMouseLeave:s,handleButtonMouseEnter:w,handleImageButtonMouseEnter:B,handleButtonMouseLeave:v,closeEmojiPicker:T,closeImagePicker:I,closeLinkModal:L,insertEmojiUniversal:j,insertImageUniversal:W,insertLinkUniversal:H,insertLinkFromModalUniversal:ae,insertSpoilerUniversal:fe}=Gt(),se=K=>{n("update-reply-content",K.target.value);const O=K.target;O&&(O.style.height="auto",O.style.height="".concat(Math.min(O.scrollHeight,200),"px"))},x={get value(){return u.replyContent},set value(K){n("update-reply-content",K)}};return{replyTextarea:d,showEmojiPicker:C,showImagePicker:b,isCollapsed:o,insertEmoji:K=>{j(K,d,x,O=>{n("update-reply-content",O)})},insertImage:K=>{W(K,d,x,O=>{n("update-reply-content",O)})},insertSpoiler:()=>{fe(d,x,K=>{n("update-reply-content",K)})},handleEmojiMouseEnter:_,handleEmojiMouseLeave:E,handleImageMouseEnter:k,handleImageMouseLeave:s,handleButtonMouseEnter:w,handleButtonMouseLeave:v,closeEmojiPicker:T,closeImagePicker:I,handleImageButtonMouseEnter:B,handleReplyInput:se,toggleCollapsed:()=>{o.value=!o.value},showLinkModal:g,selectedTextForLink:h,insertLink:()=>{H(d,x,K=>{n("update-reply-content",K)})},closeLinkModal:L,insertLinkFromModal:K=>{ae(K,d,x,O=>{n("update-reply-content",O)})}}},computed:{canReply(){return this.currentUser?this.currentUser.allow_comments===1:!0},getReplyPlaceholder(){return this.currentUser?this.currentUser.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç..."},formattedContent(){const{formatContent:u}=In();return u(this.comment.content)}}},al={class:"comment-thread"},rl={key:0,class:"reply-form"},ul={class:"textarea-container"},dl=["value","placeholder","disabled"],cl={class:"reply-footer"},vl={class:"reply-actions"},ml=["disabled"],fl={class:"character-counter-container"},gl=["disabled"],kl={key:1,class:"replies-container"},yl=["title"],hl={class:"replies-count"},bl=["title"],pl={key:0,class:"replies-content"};function _l(u,n,d,o,C,b){const g=ie("CommentItem"),h=ie("EmojiPicker"),_=ie("ImagePicker"),E=ie("LinkModal"),k=ie("CommentThread",!0);return i(),a("div",al,[X(g,{comment:d.comment,"current-user":d.currentUser,"editing-comment-id":d.editingCommentId,onReply:n[0]||(n[0]=s=>u.$emit("reply",s)),onStartEdit:n[1]||(n[1]=s=>u.$emit("start-edit",s)),onCancelEdit:n[2]||(n[2]=s=>u.$emit("cancel-edit")),onEdit:n[3]||(n[3]=(s,w)=>u.$emit("edit",s,w)),onDelete:n[4]||(n[4]=s=>u.$emit("delete",s)),onRate:n[5]||(n[5]=(s,w)=>u.$emit("rate",s,w))},null,8,["comment","current-user","editing-comment-id"]),d.replyTo&&d.replyTo.id===d.comment.id?(i(),a("div",rl,[e("div",ul,[e("textarea",{ref:"replyTextarea",class:"comment-textarea",value:d.replyContent,placeholder:b.getReplyPlaceholder,disabled:d.currentUser&&d.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:n[6]||(n[6]=(...s)=>o.handleReplyInput&&o.handleReplyInput(...s)),onKeydown:n[7]||(n[7]=s=>u.$emit("reply-keydown",s))},null,40,dl)]),e("div",cl,[e("div",vl,[e("button",{class:"cancel-reply",onClick:n[8]||(n[8]=s=>u.$emit("cancel-reply"))},"–û—Ç–º–µ–Ω–∞"),e("button",{class:"submit-button",disabled:!d.replyContent.trim()||d.replyContent.length>1500||d.currentUser&&d.currentUser.allow_comments!==1,onClick:n[9]||(n[9]=s=>u.$emit("submit-reply"))}," –û—Ç–≤–µ—Ç–∏—Ç—å ",8,ml)]),e("div",fl,[e("div",{class:S(["character-counter-inline",{"near-limit":d.replyContent.length>1400,"at-limit":d.replyContent.length>=1500}])},c(d.replyContent.length)+"/1500 ",3),e("button",{type:"button",class:S(["emoji-button-inline",{active:o.showEmojiPicker}]),onMouseenter:n[10]||(n[10]=(...s)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...s)),onMouseleave:n[11]||(n[11]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))}," üòä ",34),e("button",{type:"button",class:S(["emoji-button-inline",{active:o.showImagePicker}]),onMouseenter:n[12]||(n[12]=(...s)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...s)),onMouseleave:n[13]||(n[13]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))},n[29]||(n[29]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-597bf6f3><g id="logo" data-v-597bf6f3><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-597bf6f3></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-597bf6f3></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-597bf6f3></path></g></svg>',1)]),34),e("button",{type:"button",class:"emoji-button-inline spoiler-button",disabled:d.currentUser&&d.currentUser.allow_comments!==1,title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä",onClick:n[14]||(n[14]=(...s)=>o.insertSpoiler&&o.insertSpoiler(...s))},n[30]||(n[30]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,gl),e("button",{type:"button",class:"emoji-button-inline link-button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",onClick:n[15]||(n[15]=(...s)=>o.insertLink&&o.insertLink(...s))},n[31]||(n[31]=[e("i",{class:"fas fa-link"},null,-1)])),X(h,{"is-visible":o.showEmojiPicker,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),X(_,{"is-visible":o.showImagePicker,"current-user":d.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:n[16]||(n[16]=()=>u.$router.push("/login"))},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose"]),X(E,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])])):f("",!0),d.comment.replies&&d.comment.replies.length>0?(i(),a("div",kl,[e("button",{class:"collapse-toggle",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:n[17]||(n[17]=(...s)=>o.toggleCollapsed&&o.toggleCollapsed(...s))},[e("span",{class:S(["collapse-icon",{expanded:!o.isCollapsed}])},n[32]||(n[32]=[e("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2),e("span",hl,c(d.comment.replies.length)+" "+c(d.comment.replies.length===1?"–æ—Ç–≤–µ—Ç":"–æ—Ç–≤–µ—Ç–æ–≤"),1)],8,yl),e("div",{class:"vertical-line-clickable",title:o.isCollapsed?"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã":"–°–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç—ã",onClick:n[18]||(n[18]=(...s)=>o.toggleCollapsed&&o.toggleCollapsed(...s))},[e("div",{class:S(["vertical-line-visual",{collapsed:o.isCollapsed}])},null,2)],8,bl),o.isCollapsed?f("",!0):(i(),a("div",pl,[(i(!0),a(Z,null,ne(d.comment.replies,s=>(i(),Je(k,{key:s.id,comment:s,"current-user":d.currentUser,"reply-to":d.replyTo,"reply-content":d.replyContent,"editing-comment-id":d.editingCommentId,onReply:n[19]||(n[19]=w=>u.$emit("reply",w)),onStartEdit:n[20]||(n[20]=w=>u.$emit("start-edit",w)),onCancelEdit:n[21]||(n[21]=w=>u.$emit("cancel-edit")),onEdit:n[22]||(n[22]=(w,B)=>u.$emit("edit",w,B)),onDelete:n[23]||(n[23]=w=>u.$emit("delete",w)),onRate:n[24]||(n[24]=(w,B)=>u.$emit("rate",w,B)),onSubmitReply:n[25]||(n[25]=w=>u.$emit("submit-reply")),onCancelReply:n[26]||(n[26]=w=>u.$emit("cancel-reply")),onUpdateReplyContent:n[27]||(n[27]=w=>u.$emit("update-reply-content",w)),onReplyKeydown:n[28]||(n[28]=w=>u.$emit("reply-keydown",w))},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id"]))),128))]))])):f("",!0)])}const wl=ze(il,[["render",_l],["__scopeId","data-v-597bf6f3"]]),Cl={name:"Comments",components:{CommentThread:wl,Notification:Sn,EmojiPicker:zt,ImagePicker:Wt,LinkModal:Kt},props:{movieId:{type:[String,Number],required:!0}},setup(u){const n=Mn(),d=qt(),o=Dt(),C=m([]),b=m(""),g=m(null),h=m(""),_=m(null),E=m(n.user),k=m(null),s=m(null),w=m(o.isAutoShowComments),B=m(!1),v=m(3),T=m(o.commentsSortBy),I=m(T.value==="date"?"asc":"desc"),{showEmojiPicker:L,showImagePicker:j,showLinkModal:W,selectedTextForLink:H,handleEmojiMouseEnter:ae,handleEmojiMouseLeave:fe,handleImageMouseEnter:se,handleImageMouseLeave:x,handleButtonMouseEnter:ke,handleImageButtonMouseEnter:J,handleButtonMouseLeave:Y,closeEmojiPicker:ye,closeImagePicker:R,closeLinkModal:ve,insertEmojiUniversal:K,insertImageUniversal:O,insertLinkUniversal:Ie,insertLinkFromModalUniversal:$,insertSpoilerUniversal:Pe,autoResize:je}=Gt(),Te=P(()=>{const M=(U=null)=>{const Q=C.value.filter(G=>G.parent_id===U).filter(G=>!G.is_deleted||G.replies&&G.replies.length>0);let V;return U===null?V=Q.sort((G,re)=>{if(T.value==="rating"){const Ae=G.rating||0,le=re.rating||0;return Ae!==le?I.value==="asc"?Ae-le:le-Ae:G.id-re.id}return I.value==="asc"?G.id-re.id:re.id-G.id}):V=Q.sort((G,re)=>G.id-re.id),V.map(G=>({...G,replies:M(G.id)}))};return M()}),$e=P(()=>{const M=U=>U.reduce((Q,V)=>Q+1+M(V.replies||[]),0);return M(Te.value)}),dt=P(()=>Te.value.slice(0,v.value)),et=P(()=>Te.value.length>v.value),ct=P(()=>Te.value.length-v.value),tt=()=>{v.value=Te.value.length},Be=M=>{T.value===M?I.value=I.value==="asc"?"desc":"asc":(T.value=M,I.value=M==="date"?"asc":"desc",o.setCommentsSortBy(M))},he=async()=>{try{const M=await uo(u.movieId);C.value=M}catch(M){console.error("Failed to load comments:",M),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.")}},We=async()=>{if(B.value)return;if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(E.value&&E.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!b.value.replace(/\[spoiler\]\s*\[\/spoiler\]/g,"").replace(/\[img\]\s*\[\/img\]/g,"").replace(/\[link=[^\]]+\]\s*\[\/link\]/g,"").trim()){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");return}if(b.value.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await kn(u.movieId,b.value.trim()),b.value="",await he(),w.value=!0,Se(()=>{s.value&&(s.value.focus(),s.value.style.height="auto"),setTimeout(()=>{const U=document.querySelectorAll(".comment-item[data-comment-id]");if(U.length>0){const Q=Array.from(U).map(V=>parseInt(V.getAttribute("data-comment-id"))).filter(V=>!isNaN(V));if(Q.length>0){const V=Math.max(...Q),G=document.querySelector('[data-comment-id="'.concat(V,'"]'));G&&G.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},300)})}catch(U){console.error("Failed to create comment:",U),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ue=M=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}_.value=null,g.value=M,h.value="",Se(()=>{const U=document.querySelector(".reply-form");U&&U.scrollIntoView({behavior:"smooth",block:"center"})})},Ke=async()=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(E.value&&E.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(!(!h.value.trim()||!g.value)){if(h.value.length>1500){k.value.showNotification("–û—Ç–≤–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await kn(u.movieId,h.value.trim(),g.value.id);const M=g.value.id;await he(),h.value="",g.value=null,Se(()=>{setTimeout(()=>{const U=document.querySelector('[data-comment-id="'.concat(M,'"]'));if(U){const Q=U.querySelector(".replies-content");if(Q){const V=Q.querySelectorAll(".comment-item[data-comment-id]");if(V.length>0){const G=Array.from(V).map(re=>parseInt(re.getAttribute("data-comment-id"))).filter(re=>!isNaN(re));if(G.length>0){const re=Math.max(...G),Ae=document.querySelector('[data-comment-id="'.concat(re,'"]'));Ae&&Ae.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}}}},300)})}catch(M){console.error("Error submitting reply:",M),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}}},nt=async(M,U)=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}if(E.value&&E.value.allow_comments!==1){k.value.showNotification("–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤");return}if(U.length>1500){k.value.showNotification("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π. –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤.");return}try{await mo(M,U.trim()),await he(),_.value=null}catch(Q){console.error("Failed to update comment:",Q),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},ot=async M=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await vo(M),await he()}catch(U){console.error("Failed to delete comment:",U),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},me=async(M,U)=>{if(!n.token){k.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:y});return}try{await co(M,U),await he()}catch(Q){console.error("Failed to rate comment:",Q),k.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")}},Ge=M=>{B.value||L.value||M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),We())},be=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),Ke())},y=()=>{d.push("/login")},D=M=>{B.value=!0,K(M,s,b,U=>{b.value=U}),setTimeout(()=>{B.value=!1},100)},xe=M=>{O(M,s,b,U=>{b.value=U})},pt=()=>{Pe(s,b,M=>{b.value=M})},xt=()=>{Ie(s,b,M=>{b.value=M})},_t=M=>{$(M,s,b,U=>{b.value=U})},Rt=P(()=>E.value?E.value.allow_comments!==1?"–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤":"–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."),vt=P(()=>E.value?E.value.allow_comments===1:!0),Nt=M=>{g.value=null,h.value="",_.value=M},Ye=()=>{_.value=null};return rt(()=>{he()}),{comments:C,groupedComments:Te,displayedComments:dt,hasMoreComments:et,remainingCommentsCount:ct,showMoreComments:tt,sortBy:T,setSortBy:Be,sortDirection:I,newComment:b,replyTo:g,replyContent:h,editingCommentId:_,currentUser:E,notificationRef:k,commentTextarea:s,showComments:w,submitComment:We,handleReply:Ue,submitReply:Ke,handleEdit:nt,handleDelete:ot,handleRate:me,handleCommentKeydown:Ge,handleReplyKeydown:be,autoResize:je,totalCommentsCount:$e,getCommentWordForm:ro,showEmojiPicker:L,showImagePicker:j,showLinkModal:W,selectedTextForLink:H,insertEmoji:D,insertImage:xe,handleEmojiMouseEnter:ae,handleEmojiMouseLeave:fe,handleImageMouseEnter:se,handleImageMouseLeave:x,closeEmojiPicker:ye,closeImagePicker:R,handleButtonMouseLeave:Y,handleButtonMouseEnter:ke,handleImageButtonMouseEnter:J,getCommentPlaceholder:Rt,canComment:vt,handleStartEdit:Nt,handleCancelEdit:Ye,insertSpoiler:pt,insertLink:xt,insertLinkFromModal:_t,closeLinkModal:ve}}},El={class:"comments-section"},Ll={class:"spoiler-content"},Ml={key:1,class:"comments-container"},Sl={class:"comments-header"},Il={class:"comments-controls"},Tl={class:"textarea-container"},xl=["placeholder","disabled"],Rl={class:"comment-footer"},Nl={class:"comment-actions"},Pl=["disabled"],jl={class:"character-counter-container"},Bl=["disabled"],Ul=["disabled"],Al=["disabled"],Ol={class:"comments-list"},Vl={key:0,class:"show-more-comments"};function Fl(u,n,d,o,C,b){const g=ie("EmojiPicker"),h=ie("ImagePicker"),_=ie("LinkModal"),E=ie("CommentThread"),k=ie("Notification");return i(),a("div",El,[o.showComments?(i(),a("div",Ml,[e("div",Sl,[e("div",Il,[e("button",{class:S(["sort-button",{active:o.sortBy==="date"}]),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ",onClick:n[1]||(n[1]=s=>o.setSortBy("date"))},[n[20]||(n[20]=e("i",{class:"fas fa-clock"},null,-1)),n[21]||(n[21]=A(" –ü–æ –¥–∞—Ç–µ ")),o.sortBy==="date"?(i(),a("i",{key:0,class:S(["fas",o.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):f("",!0)],2),e("button",{class:S(["sort-button",{active:o.sortBy==="rating"}]),title:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É",onClick:n[2]||(n[2]=s=>o.setSortBy("rating"))},[n[22]||(n[22]=e("i",{class:"fas fa-thumbs-up"},null,-1)),n[23]||(n[23]=A(" –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ")),o.sortBy==="rating"?(i(),a("i",{key:0,class:S(["fas",o.sortDirection==="asc"?"fa-arrow-up":"fa-arrow-down"])},null,2)):f("",!0)],2)]),e("button",{class:"hide-comments-btn",onClick:n[3]||(n[3]=s=>o.showComments=!1)},n[24]||(n[24]=[e("i",{class:"fas fa-eye-slash"},null,-1),A(" –°–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ")]))]),e("form",{class:"comment-form",onSubmit:n[13]||(n[13]=ut((...s)=>o.submitComment&&o.submitComment(...s),["prevent"]))},[e("div",Tl,[te(e("textarea",{ref:"commentTextarea","onUpdate:modelValue":n[4]||(n[4]=s=>o.newComment=s),class:"comment-textarea",placeholder:o.getCommentPlaceholder,disabled:o.currentUser&&o.currentUser.allow_comments!==1,rows:"3",maxlength:"1500",onInput:n[5]||(n[5]=(...s)=>o.autoResize&&o.autoResize(...s)),onKeydown:n[6]||(n[6]=(...s)=>o.handleCommentKeydown&&o.handleCommentKeydown(...s))},null,40,xl),[[Me,o.newComment]])]),e("div",Rl,[e("div",Nl,[e("button",{class:"submit-button",type:"submit",disabled:!o.newComment.trim()||o.newComment.length>1500||o.currentUser&&o.currentUser.allow_comments!==1}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Pl)]),e("div",jl,[e("div",{class:S(["character-counter-inline",{"near-limit":o.newComment.length>1400,"at-limit":o.newComment.length>=1500}])},c(o.newComment.length)+"/1500 ",3),e("button",{type:"button",class:S(["emoji-button-inline",{active:o.showEmojiPicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:n[7]||(n[7]=(...s)=>o.handleButtonMouseEnter&&o.handleButtonMouseEnter(...s)),onMouseleave:n[8]||(n[8]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))}," üòä ",42,Bl),e("button",{type:"button",class:S(["emoji-button-inline",{active:o.showImagePicker}]),disabled:o.currentUser&&o.currentUser.allow_comments!==1,onMouseenter:n[9]||(n[9]=(...s)=>o.handleImageButtonMouseEnter&&o.handleImageButtonMouseEnter(...s)),onMouseleave:n[10]||(n[10]=(...s)=>o.handleButtonMouseLeave&&o.handleButtonMouseLeave(...s))},n[25]||(n[25]=[bt('<svg width="28" height="28" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="seven-tv-icon" data-v-14ea7e4b><g id="logo" data-v-14ea7e4b><path d="M20.7465 5.48825L21.9799 3.33745L22.646 2.20024L21.4125 0.0494437V0H14.8259L17.2928 4.3016L17.9836 5.48825H20.7465Z" data-v-14ea7e4b></path><path d="M7.15395 19.9258L14.5546 7.02104L15.4673 5.43884L13.0004 1.13724L12.3097 0.0247596H1.8995L0.666057 2.17556L0 3.31276L1.23344 5.46356V5.51301H9.12745L2.96025 16.267L2.09685 17.7998L3.33029 19.9506V20H7.15395" data-v-14ea7e4b></path><path d="M17.4655 19.9257H21.2398L26.1736 11.3225L27.037 9.83924L25.8036 7.68844V7.63899H22.0046L19.5377 11.9406L19.365 12.262L16.8981 7.96038L16.7255 7.63899L14.2586 11.9406L13.5679 13.1272L17.2682 19.5796L17.4655 19.9257Z" data-v-14ea7e4b></path></g></svg>',1)]),42,Ul),e("button",{type:"button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä",class:"emoji-button-inline spoiler-button",disabled:o.currentUser&&o.currentUser.allow_comments!==1,onClick:n[11]||(n[11]=(...s)=>o.insertSpoiler&&o.insertSpoiler(...s))},n[26]||(n[26]=[e("i",{class:"fas fa-eye-slash"},null,-1)]),8,Al),e("button",{type:"button",title:"–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É",class:"emoji-button-inline link-button",onClick:n[12]||(n[12]=(...s)=>o.insertLink&&o.insertLink(...s))},n[27]||(n[27]=[e("i",{class:"fas fa-link"},null,-1)])),X(g,{"is-visible":o.showEmojiPicker&&o.canComment,onEmojiSelected:o.insertEmoji,onMouseEnter:o.handleEmojiMouseEnter,onMouseLeave:o.handleEmojiMouseLeave,onClose:o.closeEmojiPicker},null,8,["is-visible","onEmojiSelected","onMouseEnter","onMouseLeave","onClose"]),X(h,{"is-visible":o.showImagePicker&&o.canComment,"current-user":o.currentUser,onImageSelected:o.insertImage,onMouseEnter:o.handleImageMouseEnter,onMouseLeave:o.handleImageMouseLeave,onClose:o.closeImagePicker,onLoginRequired:u.openLogin},null,8,["is-visible","current-user","onImageSelected","onMouseEnter","onMouseLeave","onClose","onLoginRequired"]),X(_,{"is-visible":o.showLinkModal,"selected-text":o.selectedTextForLink,onClose:o.closeLinkModal,onSubmit:o.insertLinkFromModal},null,8,["is-visible","selected-text","onClose","onSubmit"])])])],32),e("div",Ol,[(i(!0),a(Z,null,ne(o.displayedComments,s=>(i(),Je(E,{key:s.id,comment:s,"current-user":o.currentUser,"reply-to":o.replyTo,"reply-content":o.replyContent,"editing-comment-id":o.editingCommentId,"is-first-comment":!1,onReply:o.handleReply,onStartEdit:o.handleStartEdit,onCancelEdit:o.handleCancelEdit,onEdit:o.handleEdit,onDelete:o.handleDelete,onRate:o.handleRate,onSubmitReply:o.submitReply,onCancelReply:n[14]||(n[14]=w=>o.replyTo=null),onUpdateReplyContent:n[15]||(n[15]=w=>o.replyContent=w),onReplyKeydown:o.handleReplyKeydown},null,8,["comment","current-user","reply-to","reply-content","editing-comment-id","onReply","onStartEdit","onCancelEdit","onEdit","onDelete","onRate","onSubmitReply","onReplyKeydown"]))),128)),o.hasMoreComments?(i(),a("div",Vl,[e("button",{class:"show-more-btn",onClick:n[16]||(n[16]=(...s)=>o.showMoreComments&&o.showMoreComments(...s))}," –ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ "+c(o.remainingCommentsCount)+" "+c(o.getCommentWordForm(o.remainingCommentsCount)),1)])):f("",!0)])])):(i(),a("div",{key:0,class:"spoiler-warning",onClick:n[0]||(n[0]=s=>o.showComments=!0)},[e("div",Ll,[n[17]||(n[17]=e("i",{class:"fas fa-eye-slash"},null,-1)),n[18]||(n[18]=e("h3",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å–∫—Ä—ã—Ç—ã",-1)),n[19]||(n[19]=e("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.",-1)),e("div",{class:S(["comments-count",{"no-comments":o.totalCommentsCount===0}])},[o.totalCommentsCount===0?(i(),a(Z,{key:0},[A(" –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç ")],64)):(i(),a(Z,{key:1},[A(c(o.totalCommentsCount)+" "+c(o.getCommentWordForm(o.totalCommentsCount)),1)],64))],2)])])),X(k,{ref:"notificationRef"},null,512)])}const Hl=ze(Cl,[["render",Fl],["__scopeId","data-v-14ea7e4b"]]),Dl={class:"movie-info"},ql={class:"content"},zl={key:0,class:"content-card"},Wl={class:"movie-skeleton"},Kl={class:"movie-skeleton__player"},Gl={key:2,class:"content-card"},Yl={key:3,class:"content-card"},Zl={class:"content-header"},Ql=["src"],Xl={class:"content-title"},Jl={key:0,class:"ratings-links"},$l={key:1},ei=["href","title"],ti={key:2},ni=["href","title"],oi={key:3},si=["href","title"],li={key:4},ii=["href","title"],ai={key:5},ri=["href"],ui={class:"action-buttons-group"},di=["title"],ci={key:0,class:"fa-regular fa-face-grin-wink"},vi={key:1,class:"fas fa-spinner fa-spin"},mi=["title"],fi=["title"],gi={key:1,class:"mobile-list-dropdown"},ki={class:"mobile-list-content"},yi=["content"],hi=["content"],bi={class:"additional-info"},pi={class:"info-content"},_i={key:0,class:"movie-poster-container desktop-only"},wi=["href"],Ci=["src"],Ei={class:"details-container"},Li={class:"info-list"},Mi={key:0},Si={key:1},Ii={key:2},Ti={key:3},xi={key:4},Ri={key:5},Ni={key:6},Pi={key:7},ji={key:8},Bi={key:9,class:"rating-boxes"},Ui={key:0,class:"rating-box mpaa"},Ai={key:1,class:"rating-box age"},Oi={class:"content-info"},Vi={key:0,class:"content-description-text"},Fi={key:3,class:"movie-note-display"},Hi={class:"movie-note-content"},Di={class:"movie-note-footer"},qi={class:"note-date"},zi={key:4,class:"comments-section"},Wi={key:5,class:"staff-section"},Ki={class:"staff-categories"},Gi={key:0,class:"staff-category"},Yi={class:"staff-list"},Zi=["href","title"],Qi=["src","alt"],Xi={class:"staff-name"},Ji={key:0,class:"staff-role"},$i=["href","title"],ea={key:1,class:"staff-category"},ta={class:"staff-names-container"},na={class:"staff-names-list"},oa=["href"],sa=["href","title"],la={key:2,class:"staff-category"},ia={class:"staff-names-container"},aa={class:"staff-names-list"},ra=["href"],ua=["href","title"],da={key:6,class:"yt-video-container"},ca={key:7,class:"related-movies"},va=["title"],ma={key:8,class:"related-movies"},fa=["title"],ga={key:0,class:"nudity-info-popup"},ka={class:"nudity-info-content"},ya={key:0,class:"nudity-info-loading"},ha={key:1},ba={class:"nudity-info-actions"},pa=["href"],_a={key:1,class:"nudity-info-popup"},wa={class:"nudity-info-content"},Ca={class:"timings-text"},Ea={key:0,class:"timing-entries"},La={class:"timing-content"},Ma={class:"timing-header-row",style:{display:"flex","align-items":"center",gap:"8px"}},Sa={key:0,class:"pending-badge"},Ia={key:1,class:"clean-text-badge"},Ta={key:2,class:"highly-rated-badge"},xa={key:3,class:"top-rated-badge"},Ra={class:"timing-actions-row",style:{display:"flex","align-items":"center",gap:"8px","margin-top":"8px"}},Na=["onClick"],Pa=["onClick"],ja=["onClick"],Ba=["onClick"],Ua=["onClick"],Aa=["onClick"],Oa={class:"timing-text"},Va={class:"timing-author"},Fa=["title"],Ha={class:"timing-vote-container"},Da=["disabled","onClick"],qa={class:"vote-count"},za=["disabled","onClick"],Wa={class:"vote-count"},Ka={key:0,style:{color:"#fff","font-size":"13px",margin:"4px 0 0 0"}},Ga={key:0},Ya={key:1},Za={key:1},Qa={key:0,class:"general-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},Xa={style:{margin:"0 0 10px 0",color:"#fff"}},Ja={style:{color:"#fff","font-size":"13px"}},$a={key:0},er={key:1},tr={key:1,class:"overlay-parser-result",style:{"margin-top":"15px",padding:"15px",background:"rgba(255, 255, 255, 0.05)","border-radius":"8px"}},nr={style:{margin:"0 0 10px 0",color:"#fff"}},or={style:{color:"#fff","font-size":"13px"}},sr={key:0},lr={key:1},ir={class:"nudity-info-actions"},ar={key:2,class:"timing-modal"},rr={class:"timing-modal-content"},ur={class:"timing-modal-header"},dr={class:"timing-submission-form"},cr={key:0,class:"timing-preview"},vr={class:"timing-preview-content"},mr={class:"timing-preview-range"},fr={class:"timing-preview-duration"},gr={class:"timing-form-actions"},kr=["disabled"],yr={key:0,class:"fas fa-spinner fa-spin"},hr={key:1},br={key:3,class:"timing-modal"},pr={class:"timing-modal-content"},_r={class:"timing-submission-form"},wr={class:"timing-form-actions"},Cr=["disabled"],Er={key:0,class:"fas fa-spinner fa-spin"},Lr={key:1},Mr={key:4,class:"timing-modal note-modal"},Sr={class:"timing-modal-content"},Ir={class:"timing-modal-header"},Tr={class:"timing-submission-form"},xr={class:"char-counter"},Rr={class:"timing-form-actions note-form-actions"},Nr=["disabled"],Pr={key:0,class:"fas fa-spinner fa-spin"},jr={key:1,class:"fas fa-save"},Br=["disabled"],Ur={key:0,class:"fas fa-spinner fa-spin"},Ar={key:1,class:"fas fa-trash"},Or={class:"modal-header"},Vr={class:"modal-header-controls"},Fr={class:"modal-body"},Hr=["disabled"],Dr={key:0,class:"fas fa-spinner fa-spin"},qr={key:1,class:"fas fa-list"},zr={class:"top-submitters-list"},Wr={class:"submitter-info"},Kr={class:"submitter-name"},Gr=["href"],Yr={class:"submitter-count"},Zr={class:"submitter-contribution"},Qr={class:"modal-header"},Xr={class:"modal-body"},Jr={key:0,class:"loading-spinner"},$r={key:1,class:"no-timings"},eu={key:2,class:"no-timings"},tu={key:3,class:"all-timings-list"},nu={class:"timing-header"},ou={class:"timing-meta"},su={class:"timing-author"},lu={class:"timing-date"},iu={class:"timing-movie-info"},au={key:0,class:"admin-controls"},ru=["disabled","onClick"],uu={key:0,class:"fas fa-spinner fa-spin"},du={key:1,class:"fas fa-check"},cu=["disabled","onClick"],vu={key:0,class:"fas fa-spinner fa-spin"},mu={key:1,class:"fas fa-times"},fu=["disabled","onClick"],gu={key:0,class:"fas fa-spinner fa-spin"},ku={key:1,class:"fas fa-eye-slash"},yu={class:"timing-content"},hu={class:"timing-text"},bu={key:7,class:"timing-modal obs-modal"},pu={class:"timing-modal-content obs-modal-content"},_u={class:"timing-modal-header"},wu={class:"obs-settings-form"},Cu={class:"obs-setting-group"},Eu={class:"obs-checkbox-label"},Lu={key:0,class:"obs-connection-settings"},Mu={class:"obs-setting-group"},Su={class:"obs-setting-group"},Iu={class:"obs-setting-group"},Tu={key:0,class:"obs-setting-group"},xu={key:0,class:"obs-warning"},Ru={key:1,class:"obs-filter-selection"},Nu=["value"],Pu={key:0,class:"selected-filter-info"},ju={class:"filter-details"},Bu={class:"obs-info"},Uu={class:"obs-setting-group"},Au={class:"obs-checkbox-label"},Ou={class:"obs-actions"},Vu=["disabled"],Fu={key:0,class:"fas fa-spinner fa-spin"},Hu={key:1,class:"fas fa-plug"},Du=["disabled"],qu=["disabled"],zu={__name:"MovieInfo",setup(u){const n=m(!0),d=Dt(),o=Mn(),C=fo(),b=Fo(),g=go(),h=qt(),_=m(g.params.kp_id),E=m(""),k=m(null),s=m(null),w=ko(),B=Ho(),v=m(null),T=P(()=>B.areTrailersActive),I=m(null),L=m(!1),j=m(!1),W=m(10),H=m(null),ae=m(!1),fe=m(null),se=m(!1),x=m(void 0),ke=m(null),J=m(new Set),Y=m(new Set),ye=m(!1);m(null);const R=m(!1),ve=m(null),K=m(!1),O=m(null),Ie=m(!1),$=m(""),Pe=m(!1),je=m(!1),Te=P(()=>!x.value||!Array.isArray(x.value)?[]:[...x.value].sort((l,t)=>{const p=l.voteScore||0,N=t.voteScore||0;if(N!==p)return N-p;const F=l.upvotes||0,ue=t.upvotes||0;return ue!==F?ue-F:l.id-t.id})),$e=P(()=>{var l;return Array.isArray((l=s.value)==null?void 0:l.nudity_timings)&&s.value.nudity_timings.length>0}),dt=P(()=>{var l;return Array.isArray((l=s.value)==null?void 0:l.nudity_timings)&&s.value.nudity_timings.length>0&&d.isStreamerMode&&!d.isMobile}),et=P(()=>{var l,t,p,N,F,ue,_e,we,Ce,Ee;return((t=(l=s.value)==null?void 0:l.lists)==null?void 0:t.isFavorite)||((N=(p=s.value)==null?void 0:p.lists)==null?void 0:N.isWatching)||((ue=(F=s.value)==null?void 0:F.lists)==null?void 0:ue.isLater)||((we=(_e=s.value)==null?void 0:_e.lists)==null?void 0:we.isCompleted)||((Ee=(Ce=s.value)==null?void 0:Ce.lists)==null?void 0:Ee.isAbandoned)}),ct=P(()=>d.isCommentsEnabled),tt=()=>{if(s.value){const l=s.value.name_ru||s.value.name_en||s.value.name_original||"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏–ª—å–º–µ";document.title=l}},Be=l=>l?l.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "):"0",he=l=>(l||[]).map(t=>({kp_id:t.film_id,poster:t.poster_url_preview||t.poster_url,title:t.name_ru||t.name_en||t.name_original})),We=l=>{if(typeof l!="number")return;const t=Math.floor(l/60),p=l%60;return"".concat(t," —á. ").concat(p," –º–∏–Ω.")},Ue=m(!1),Ke=m({top:"0px",left:"0px"}),nt=l=>{Ue.value=!0,Ke.value={top:"".concat(l.pageY+10,"px"),left:"".concat(l.pageX-70,"px")}},ot=async()=>{try{const l=[s.value.name_ru||s.value.name_en||s.value.name_original,...s.value.year?[s.value.year]:[],...s.value.film_length?[We(s.value.film_length)]:[]];await navigator.clipboard.writeText(l.join(", ")),v.value.showNotification("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l)}},me=async(l=!0)=>{var t,p,N,F,ue,_e,we,Ce,Ee;try{let de;if(_.value.startsWith("shiki")?de=await bo(_.value):de=await po(_.value,o.token),Array.isArray(de)&&de.length===0)throw new Error("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫.");s.value=de,_.value.startsWith("shiki")?s.value={...s.value,title:s.value.name_ru||s.value.name_en,name_original:s.value.name_en,short_description:s.value.slogan}:s.value={...s.value,title:s.value.name_ru||s.value.name_en||s.value.name_original,kinopoisk_id:_.value},o.token&&On(),w.setHeaderContent({text:s.value.title,imageUrl:s.value.logo_url}),tt();const oe={kp_id:_.value,title:((t=s.value)==null?void 0:t.name_ru)||((p=s.value)==null?void 0:p.name_en)||((N=s.value)==null?void 0:N.name_original),poster:((F=s.value)==null?void 0:F.poster_url)||((ue=s.value)==null?void 0:ue.cover_url)||((we=(_e=s.value)==null?void 0:_e.screenshots)==null?void 0:we[0]),year:(Ce=s.value)==null?void 0:Ce.year,type:(Ee=s.value)==null?void 0:Ee.type};if(_.value.startsWith("shiki"))if(s.value.screenshots&&s.value.screenshots.length>0){const Ne=Math.floor(Math.random()*s.value.screenshots.length),Xe=s.value.screenshots[Ne];C.updateMoviePoster(Xe)}else oe.poster&&C.updateMoviePoster(oe.poster);else oe.poster&&C.updateMoviePoster(oe.poster);if(P(()=>d.isHistoryAllowed).value&&oe.kp_id&&oe.title&&l)if(o.token)try{await bn(oe.kp_id,ee.HISTORY)}catch(Ne){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é:",Ne)}else d.addToHistory({...oe})}catch(de){const{message:oe,code:De}=ce(de);E.value=oe,k.value=De,console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–∞—Ö:",de)}},Ge=P(()=>{var l;return((l=s.value)==null?void 0:l.videos)||[]}),be=P(()=>{var l;return he((l=s.value)==null?void 0:l.sequels_and_prequels)}),y=P(()=>{var l;return he((l=s.value)==null?void 0:l.similars)}),D=()=>{var N;const l=((N=document.querySelector(".related-movies"))==null?void 0:N.clientWidth)||0,p=Math.floor(l/160)||10;W.value=Math.max(1,p)},xe=()=>{D()},pt=l=>{if(l.altKey&&l.keyCode===84&&document.querySelector(".player-container")){const p=document.querySelector(".theater-mode-btn");p&&p.click()}},xt=l=>{l.button===1&&(l.preventDefault(),_t(l))},_t=async l=>{if(H.value!==null){H.value=null,ae.value=!1;return}x.value=void 0,fe.value=l.currentTarget,H.value="",ae.value=!0;try{const t=await _o(s.value.imdb_id);H.value=t.nudity_info}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö:",t),H.value="–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ü–µ–Ω–∞—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Parents Guide –Ω–∞ IMDb –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."}finally{ae.value=!1}},Rt=l=>{var t,p;if(H.value=null,x.value!==void 0){x.value=void 0;return}ke.value=l.currentTarget,x.value=((t=s.value)==null?void 0:t.nudity_timings)===null?"":((p=s.value)==null?void 0:p.nudity_timings)||""},vt=()=>{var l,t;H.value=null,x.value=((l=s.value)==null?void 0:l.nudity_timings)===null?"":((t=s.value)==null?void 0:t.nudity_timings)||""},Nt=l=>{var p,N,F,ue,_e,we,Ce,Ee,de,oe,De,Ne,Xe;return(Xe={[ee.FAVORITE]:((N=(p=s.value)==null?void 0:p.lists)==null?void 0:N.isFavorite)||!1,[ee.HISTORY]:((ue=(F=s.value)==null?void 0:F.lists)==null?void 0:ue.isHistory)||!1,[ee.LATER]:((we=(_e=s.value)==null?void 0:_e.lists)==null?void 0:we.isLater)||!1,[ee.COMPLETED]:((Ee=(Ce=s.value)==null?void 0:Ce.lists)==null?void 0:Ee.isCompleted)||!1,[ee.ABANDONED]:((oe=(de=s.value)==null?void 0:de.lists)==null?void 0:oe.isAbandoned)||!1,[ee.WATCHING]:((Ne=(De=s.value)==null?void 0:De.lists)==null?void 0:Ne.isWatching)||!1}[l])!=null?Xe:!1},Ye=async l=>{if(!o.token){v.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>h.push("/login")});return}try{const t={[ee.FAVORITE]:"–∏–∑–±—Ä–∞–Ω–Ω–æ–µ",[ee.HISTORY]:"–∏—Å—Ç–æ—Ä–∏—é",[ee.LATER]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∑–∂–µ"',[ee.COMPLETED]:'—Å–ø–∏—Å–æ–∫ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ"',[ee.ABANDONED]:'—Å–ø–∏—Å–æ–∫ "–ë—Ä–æ—à–µ–Ω–æ"',[ee.WATCHING]:'—Å–ø–∏—Å–æ–∫ "–°–º–æ—Ç—Ä—é"'};Nt(l)?(await wo(_.value,l),v.value.showNotification("–£–¥–∞–ª–µ–Ω–æ –∏–∑ ".concat(t[l]))):(await bn(_.value,l),v.value.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ ".concat(t[l]))),await me(!1),se.value=!1}catch(t){const{message:p,code:N}=ce(t);v.value.showNotification("".concat(p," ").concat(N))}},M=l=>{const t=document.querySelector(".mobile-list-dropdown");t&&!t.contains(l.target)&&(se.value=!1)},U=l=>{const t=document.querySelector(".nudity-info-popup");t&&!t.contains(l.target)&&fe.value&&!fe.value.contains(l.target)&&(H.value=null)},Q=l=>{const t=document.querySelector(".nudity-info-popup");t&&!t.contains(l.target)&&ke.value&&!ke.value.contains(l.target)&&(x.value=void 0)};rt(async()=>{await me(),n.value=!1,document.addEventListener("keydown",pt),window.addEventListener("resize",xe),setTimeout(D,100),document.addEventListener("click",M),document.addEventListener("click",U,!0),document.addEventListener("click",Q,!0),window.selectedNudityTimings=Array.from(J.value),window.overlayNudityTimings=Array.from(Y.value)}),Vt(async()=>{w.clearHeaderContent(),document.removeEventListener("keydown",pt),window.removeEventListener("resize",xe),document.removeEventListener("click",M),document.removeEventListener("click",U,!0),document.removeEventListener("click",Q,!0),delete window.selectedNudityTimings,delete window.overlayNudityTimings}),Le(()=>g.params.kp_id,async l=>{l&&l!==_.value&&(w.clearHeaderContent(),_.value=l,I.value=null,await me(),n.value=!1)},{immediate:!0}),Le(s,()=>{tt()},{deep:!0}),Le(H,l=>{l?document.addEventListener("click",U,!0):document.removeEventListener("click",U,!0)},{deep:!0}),Le(()=>x.value!==void 0,l=>{l?(document.addEventListener("click",Q,!0),An()):document.removeEventListener("click",Q,!0)}),Le(J,()=>{window.selectedNudityTimings=Array.from(J.value)},{deep:!0}),Le(Y,()=>{window.overlayNudityTimings=Array.from(Y.value)},{deep:!0}),rt(()=>{window.selectedNudityTimings=Array.from(J.value),window.overlayNudityTimings=Array.from(Y.value);const l=setInterval(()=>{if(window.obsSources&&Array.isArray(window.obsSources)&&(on.value=window.obsSources),window.getOBSFiltersInfo){const t=window.getOBSFiltersInfo();t&&Array.isArray(t)&&b.updateObsSettings({filtersFound:t})}},1e3);Vt(()=>{clearInterval(l)})}),Vt(()=>{delete window.selectedNudityTimings,delete window.overlayNudityTimings});const V=l=>{var t,p;return((p=(t=s.value)==null?void 0:t.staff)==null?void 0:p.filter(N=>N.profession_key===l))||[]},G=async()=>{try{await navigator.clipboard.writeText(H.value),v.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l),v.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{H.value=null}},re=async()=>{if(x.value.length!==0)try{const l=x.value.map(t=>"".concat(t.timing_text," (by @").concat(t.username,")")).join("\n").concat("\nReYohoho\n");await navigator.clipboard.writeText(l),v.value.showNotification("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω")}catch(l){console.error("–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:",l),v.value.showNotification("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞")}finally{x.value=void 0}},Ae=()=>{const l=encodeURIComponent(H.value);window.open("https://translate.google.com/?sl=en&tl=ru&text=".concat(l),"_blank"),H.value=null},le=m(""),Oe=m(!1),Pt=P(()=>{if(!le.value.trim())return[];try{return St(le.value,!0)||[]}catch(l){return console.error("Error parsing timing text:",l),[]}}),jt=P(()=>le.value.trim()),Yt=l=>o.user&&l.user_id&&l.user_id===o.user.id,Tn=()=>{if(!o.token){v.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a> –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–∏–Ω–≥–æ–≤',5e3,{onClick:()=>h.push("/login")});return}Ve.value=null,le.value="",wt.value=!0},xn=l=>{Ve.value=l,le.value=l.timing_text,wt.value=!0},Bt=()=>{wt.value=!1,Ve.value=null,le.value=""},Rn=async()=>{if(!(!jt.value||Oe.value))try{Oe.value=!0,await Lo(_.value,le.value),v.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),le.value="",Bt(),await me(!1),vt()}catch(l){const{message:t}=ce(l);v.value.showNotification(t,5e3)}finally{Oe.value=!1}},Nn=async()=>{if(!(!jt.value||Oe.value||!Ve.value))try{Oe.value=!0,await Eo(Ve.value.id,le.value),v.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),Bt(),await me(!1),vt()}catch(l){const{message:t}=ce(l);v.value.showNotification(t,5e3)}finally{Oe.value=!1}},Pn=async l=>{if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∞–π–º–∏–Ω–≥?"))try{await Ro(l),v.value.showNotification("–¢–∞–π–º–∏–Ω–≥ —É–¥–∞–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!"),await me(!1),vt()}catch(t){const{message:p}=ce(t);v.value.showNotification(p,5e3)}},jn=l=>{Ct.value=l,Ze.value="",Ut.value=!0},Zt=()=>{Ut.value=!1,Ze.value="",Ct.value=null},Bn=async()=>{if(!(!Ze.value.trim()||mt.value||!Ct.value))try{mt.value=!0,await Mo(Ct.value,Ze.value),v.value.showNotification("–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"),Zt()}catch(l){const{message:t}=ce(l);v.value.showNotification(t,5e3)}finally{mt.value=!1}},Qt=async(l,t)=>{if(!o.token){v.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a> –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è',5e3,{onClick:()=>h.push("/login")});return}if(ve.value!==l)try{ve.value=l;const p=await No(l,t),N=x.value.find(F=>F.id===l);N&&(N.upvotes=p.upvotes,N.downvotes=p.downvotes,N.voteScore=p.vote_score,N.userVote===t?N.userVote=null:N.userVote=t)}catch(p){const{message:N}=ce(p);v.value.showNotification(N,5e3)}finally{ve.value=null}},Un=l=>l>0?"positive":l<0?"negative":"neutral",An=async()=>{if(!(!x.value||x.value.length===0)&&!K.value){K.value=!0;try{const l=x.value.map(async N=>{try{const F=await Uo(N.id);return{id:N.id,upvotes:F.upvotes||0,downvotes:F.downvotes||0,voteScore:F.vote_score||0,userVote:F.user_vote||null}}catch(F){return{id:N.id,upvotes:0,downvotes:0,voteScore:0,userVote:null}}}),t=await Promise.all(l),p=new Map(t.map(N=>[N.id,N]));x.value=x.value.map(N=>{const F=p.get(N.id);return F?{...N,upvotes:F.upvotes,downvotes:F.downvotes,voteScore:F.voteScore,userVote:F.userVote}:N})}catch(l){console.error("Error loading timing votes:",l)}finally{K.value=!1}}},On=async()=>{if(!(!o.isAuthenticated||!_.value))try{const l=await xo(_.value);O.value=l.note,O.value?$.value=O.value.note_text:$.value=""}catch(l){O.value=null,$.value=""}},Xt=()=>{if(!o.token){v.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫',5e3,{onClick:()=>h.push("/login")});return}Ie.value=!Ie.value},Vn=async()=>{if(!o.token){v.value.showNotification('–ù–µ–æ–±—Ö–æ–¥–∏–º–æ <a class="auth-link">–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>',5e3,{onClick:()=>h.push("/login")});return}if(!$.value.trim()){v.value.showNotification("–ó–∞–º–µ—Ç–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π");return}if($.value.length>1e4){v.value.showNotification("–ó–∞–º–µ—Ç–∫–∞ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è (–º–∞–∫—Å–∏–º—É–º 10000 —Å–∏–º–≤–æ–ª–æ–≤)");return}try{Pe.value=!0;const l=await So(_.value,$.value);O.value=l.note,$.value=l.note.note_text,v.value.showNotification("–ó–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞"),Ie.value=!1}catch(l){const{message:t}=ce(l);v.value.showNotification(t,5e3)}finally{Pe.value=!1}},Fn=async()=>{if(o.token&&confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–º–µ—Ç–∫—É?"))try{je.value=!0,await Io(_.value),O.value=null,$.value="",Ie.value=!1,v.value.showNotification("–ó–∞–º–µ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∞")}catch(l){const{message:t}=ce(l);v.value.showNotification(t,5e3)}finally{je.value=!1}},Jt=()=>{O.value?$.value=O.value.note_text:$.value="",Ie.value=!1},Hn=async()=>{try{const{submissions:l}=await Co();Et.value=l,Lt.value=!0}catch(l){const{message:t}=ce(l);v.value.showNotification(t)}},wt=m(!1),Ve=m(null),Ut=m(!1),Ze=m(""),Ct=m(null),mt=m(!1),Et=m([]),Lt=m(!1),ft=m(!1),st=m([]),lt=m(!1),ge=m(!1),Re=m(null),Fe=m(!1),He=m(!1),$t=m(!1),gt=m(!1),Mt=P({get:()=>b.obsSettings.enabled,set:l=>b.updateObsSettings({enabled:l})}),en=P({get:()=>b.obsSettings.host,set:l=>b.updateObsSettings({host:l})}),tn=P({get:()=>b.obsSettings.port,set:l=>b.updateObsSettings({port:l})}),nn=P({get:()=>b.obsSettings.password,set:l=>b.updateObsSettings({password:l})}),it=P(()=>b.obsSettings.connected),on=m([]),kt=P(()=>b.obsSettings.filtersFound),Qe=P({get:()=>b.obsSettings.selectedFilterId,set:l=>b.setObsSelectedFilter(l)}),at=P(()=>Qe.value?kt.value.find(l=>l.id===Qe.value):null),sn=P({get:()=>b.obsSettings.showObsInOverlay,set:l=>b.updateObsSettings({showObsInOverlay:l})}),Dn=async l=>{if(!ge.value)try{ge.value=!0,Re.value=l,Fe.value=!0,He.value=!1,await Po(l);const t=st.value.find(p=>p.id===l);t&&(t.status="approved"),v.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ–¥–æ–±—Ä–µ–Ω")}catch(t){const{message:p}=ce(t);v.value.showNotification("–û—à–∏–±–∫–∞: ".concat(p))}finally{ge.value=!1,Re.value=null,Fe.value=!1,He.value=!1}},qn=async l=>{if(!ge.value)try{ge.value=!0,Re.value=l,Fe.value=!1,He.value=!1,await jo(l);const t=st.value.find(p=>p.id===l);t&&(t.status="rejected"),v.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω")}catch(t){const{message:p}=ce(t);v.value.showNotification("–û—à–∏–±–∫–∞: ".concat(p))}finally{ge.value=!1,Re.value=null,Fe.value=!1,He.value=!1}},zn=async l=>{if(!ge.value)try{ge.value=!0,Re.value=l,Fe.value=!1,He.value=!0,await Bo(l);const t=st.value.find(p=>p.id===l);t&&(t.status="clean_text"),v.value.showNotification("–¢–∞–π–º–∏–Ω–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ clean_text")}catch(t){const{message:p}=ce(t);v.value.showNotification("–û—à–∏–±–∫–∞: ".concat(p))}finally{ge.value=!1,Re.value=null,Fe.value=!1,He.value=!1}},Wn=async()=>{if(!lt.value)try{lt.value=!0,ft.value=!0;const{timings:l}=await To();st.value=l}catch(l){const{message:t}=ce(l);v.value.showNotification(t),ft.value=!1}finally{lt.value=!1}},Kn=(l,t)=>{const p=[2,0,1,1,1,2];return t[l%100>4&&l%100<20?2:p[Math.min(l%10,5)]]},Gn=l=>{if(!Et.value.length)return 0;const t=Math.max(...Et.value.map(p=>p.approved_submissions_count));return l/t*100},ln=P(()=>st.value),pe=m({});function Yn(l){if(pe.value[l.id])pe.value={...pe.value,[l.id]:!1};else{const t=St(l.timing_text);pe.value={...pe.value,[l.id]:t}}}const an=P(()=>!!window.electronAPI);function Zn(l){if(!an.value){v.value?v.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}rn(l)}function Qn(l){if(!an.value){v.value?v.value.showNotification("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏"):alert("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}rn(l)}const rn=l=>{Y.value.has(l)?Y.value.delete(l):Y.value.add(l)};function Xn(){ye.value=!ye.value}function Jn(){R.value=!R.value}function At(){const l=[];if(x.value&&Array.isArray(x.value)){for(const t of x.value)if(J.value.has(t.id)){const p=St(t.timing_text);p&&p.length>0&&l.push(...p)}}return l}function Ot(){const l=[];if(x.value&&Array.isArray(x.value)&&x.value.length>0){for(const t of x.value)if(Y.value.has(t.id)){const p=St(t.timing_text);p&&p.length>0&&l.push(...p)}}return l}const $n=()=>{Mt.value&&un()},un=async()=>{var l,t,p;if(!gt.value){gt.value=!0;try{window.connectToOBS?(await window.connectToOBS(),setTimeout(()=>{window.obsSources&&(on.value=window.obsSources)},1e3),(l=v.value)==null||l.showNotification("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ OBS...")):(t=v.value)==null||t.showNotification("–ü–ª–µ–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω")}catch(N){console.error("Error connecting to OBS:",N),(p=v.value)==null||p.showNotification("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OBS")}finally{gt.value=!1}}},eo=()=>{var l,t;if(!Qe.value){(l=v.value)==null||l.showNotification("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è");return}window.testOBSBlur?window.testOBSBlur(Qe.value):(t=v.value)==null||t.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},to=()=>{var l,t;window.refreshOBSFilters?(window.refreshOBSFilters(),(l=v.value)==null||l.showNotification("–ü–æ–∏—Å–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤...")):(t=v.value)==null||t.showNotification("OBS —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},no=()=>{var l,t;Qe.value&&((t=v.value)==null||t.showNotification("–í—ã–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä: ".concat((l=at.value)==null?void 0:l.sourceName)))};return(l,t)=>{var N,F,ue,_e,we,Ce,Ee,de,oe,De,Ne,Xe,dn,cn,vn,mn,fn,gn;const p=ie("router-link");return i(),a(Z,null,[e("div",Dl,[e("div",ql,[(n.value||!s.value)&&!E.value?(i(),a("div",zl,[e("div",Wl,[t[30]||(t[30]=bt('<div class="movie-skeleton__header" data-v-ecca24ce><div class="movie-skeleton__title" data-v-ecca24ce></div></div><div class="movie-skeleton__ratings" data-v-ecca24ce><div class="movie-skeleton__rating-item" data-v-ecca24ce></div><div class="movie-skeleton__rating-item" data-v-ecca24ce></div><div class="movie-skeleton__rating-item" data-v-ecca24ce></div></div>',2)),e("div",Kl,[X(Vo)]),t[31]||(t[31]=bt('<div class="movie-skeleton__additional-info" data-v-ecca24ce><div class="movie-skeleton__section-title" data-v-ecca24ce></div><div class="movie-skeleton__info-list" data-v-ecca24ce><div class="movie-skeleton__info-item" data-v-ecca24ce></div><div class="movie-skeleton__info-item" data-v-ecca24ce></div><div class="movie-skeleton__info-item" data-v-ecca24ce></div><div class="movie-skeleton__info-item" data-v-ecca24ce></div><div class="movie-skeleton__info-item" data-v-ecca24ce></div></div></div><div class="movie-skeleton__description" data-v-ecca24ce><div class="movie-skeleton__description-line" data-v-ecca24ce></div><div class="movie-skeleton__description-line" data-v-ecca24ce></div><div class="movie-skeleton__description-line" data-v-ecca24ce></div><div class="movie-skeleton__description-line" data-v-ecca24ce></div></div>',2))])])):f("",!0),E.value?(i(),Je(yo,{key:1,message:E.value,code:k.value},null,8,["message","code"])):f("",!0),E.value?(i(),a("div",Gl,[(i(),Je(wn,{key:_.value,"kp-id":_.value,"movie-info":s.value,"onUpdate:movieInfo":me},null,8,["kp-id","movie-info"]))])):f("",!0),s.value&&!n.value?(i(),a("div",Yl,[e("div",Zl,[s.value.logo_url?(i(),a("div",{key:0,class:"content-logo",onMousemove:nt,onMouseleave:t[0]||(t[0]=r=>Ue.value=!1),onClick:ot},[e("img",{src:s.value.logo_url,alt:"–õ–æ–≥–æ—Ç–∏–ø —Ñ–∏–ª—å–º–∞",class:"content-logo"},null,8,Ql)],32)):(i(),a("div",{key:1,onMousemove:nt,onMouseleave:t[1]||(t[1]=r=>Ue.value=!1),onClick:ot},[e("h1",Xl,c(s.value.title),1)],32)),te(e("div",{class:"title-copy-tooltip",style:Ht(Ke.value)}," –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ",4),[[Tt,Ue.value]])]),s.value.kinopoisk_id||s.value.title||s.value.imdb_id||s.value.rating_imdb||s.value.shikimori_id?(i(),a("div",Jl,[s.value.kinopoisk_id?(i(),Je(Ao,{key:s.value.kinopoisk_id,"kp-id":s.value.kinopoisk_id,"show-dash":!0},null,8,["kp-id"])):f("",!0),s.value.kinopoisk_id?(i(),a("div",$l,[e("a",{href:"https://www.kinopoisk.ru/film/".concat(s.value.kinopoisk_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Be(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[t[32]||(t[32]=e("img",{src:pn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",z(It)(s.value.rating_kinopoisk)])},c(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),3),t[33]||(t[33]=e("img",{src:ht,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ei)])):f("",!0),!s.value.kinopoisk_id&&s.value.title?(i(),a("div",ti,[e("a",{href:"https://www.kinopoisk.ru/index.php?kp_query=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_kinopoisk_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Be(s.value.rating_kinopoisk_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[t[34]||(t[34]=e("img",{src:pn,alt:"–ö–ü",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",z(It)(s.value.rating_kinopoisk)])},c(s.value.rating_kinopoisk?s.value.rating_kinopoisk:"‚Äî"),3),t[35]||(t[35]=e("img",{src:ht,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ni)])):f("",!0),s.value.imdb_id?(i(),a("div",oi,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Be(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[t[36]||(t[36]=e("img",{src:_n,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",z(It)(s.value.rating_imdb)])},c(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),3),t[37]||(t[37]=e("img",{src:ht,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,si)])):f("",!0),!s.value.imdb_id&&s.value.title?(i(),a("div",li,[e("a",{href:"https://www.imdb.com/find/?q=".concat(encodeURIComponent(s.value.title+(s.value.year?" "+s.value.year:""))),target:"_blank",rel:"noopener noreferrer",class:"rating-link",title:s.value.rating_imdb_vote_count?"–û—Ü–µ–Ω–æ–∫: ".concat(Be(s.value.rating_imdb_vote_count)):"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≥–æ–ª–æ—Å–æ–≤"},[t[38]||(t[38]=e("img",{src:_n,alt:"IMDb",class:"rating-logo"},null,-1)),e("span",{class:S(["rating-value",z(It)(s.value.rating_imdb)])},c(s.value.rating_imdb?s.value.rating_imdb:"‚Äî"),3),t[39]||(t[39]=e("img",{src:ht,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1))],8,ii)])):f("",!0),s.value.shikimori_id?(i(),a("div",ai,[e("a",{href:"https://shikimori.one/animes/".concat(s.value.shikimori_id),target:"_blank",rel:"noopener noreferrer",class:"rating-link"},t[40]||(t[40]=[e("img",{src:Oo,alt:"Shiki",class:"rating-logo"},null,-1),e("img",{src:ht,alt:"–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞",class:"external-link-icon"},null,-1)]),8,ri)])):f("",!0),e("span",ui,[s.value.imdb_id?(i(),a("button",{key:0,class:"nudity-info-btn parents-guide-btn",title:H.value?"–°–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é":"–ü–æ–∫–∞–∑–∞—Ç—å Parents Guide –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ü–µ–Ω–∞—Ö",onClick:t[2]||(t[2]=r=>_t(r)),onMousedown:t[3]||(t[3]=r=>xt(r))},[t[41]||(t[41]=e("span",{class:"desktop-text"},"Parents Guide",-1)),t[42]||(t[42]=e("span",{class:"mobile-text"},"PG",-1)),ae.value?(i(),a("i",vi)):(i(),a("i",ci))],40,di)):f("",!0),e("button",{class:"nudity-info-btn",title:x.value!==void 0?"–°–∫—Ä—ã—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏":"–ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥–∏ —Å—Ü–µ–Ω 18+(–¥–ª—è —Ç–≤–∏—á–∞, –º–∏–≥–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)",onClick:t[4]||(t[4]=r=>Rt(r))},[e("i",{class:S(["fa-regular fa-clock",{"text-red":$e.value,"text-red-blink":dt.value}])},null,2),t[43]||(t[43]=e("span",{class:"mobile-text"},"–¢–∞–π–º–∏–Ω–≥–∏",-1))],8,mi),z(o).token?(i(),a("button",{key:1,class:S(["nudity-info-btn note-btn",{"has-note":O.value}]),title:O.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫—É":"–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É",onClick:Xt},t[44]||(t[44]=[e("i",{class:"fa-regular fa-note-sticky"},null,-1),e("span",{class:"mobile-text"},"–ó–∞–º–µ—Ç–∫–∞",-1)]),10,fi)):f("",!0)])])):f("",!0),(i(),Je(wn,{key:_.value,"kp-id":_.value,"movie-info":s.value,"onUpdate:movieInfo":me},null,8,["kp-id","movie-info"])),z(d).isMobile?(i(),a("div",gi,[e("button",{class:S(["mobile-list-toggle",{}]),onClick:t[5]||(t[5]=r=>se.value=!se.value)},[e("span",{class:S(["material-icons",{active:et.value}])},c(et.value?"bookmark_added":"bookmark_border"),3),t[45]||(t[45]=e("span",{class:"button-label"},"–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–∏—Å–æ–∫",-1)),e("span",{class:S(["material-icons dropdown-arrow",{expanded:se.value}])},"expand_more",2)]),te(e("div",ki,[e("button",{class:S(["mobile-list-btn",{}]),onClick:t[6]||(t[6]=r=>Ye(z(ee).FAVORITE))},[e("span",{class:S(["material-icons",{active:(F=(N=s.value)==null?void 0:N.lists)==null?void 0:F.isFavorite}])},c((_e=(ue=s.value)==null?void 0:ue.lists)!=null&&_e.isFavorite?"favorite":"favorite_border"),3),t[46]||(t[46]=e("span",{class:"button-label"},"–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:t[7]||(t[7]=r=>Ye(z(ee).WATCHING))},[e("span",{class:S(["material-icons",{active:(Ce=(we=s.value)==null?void 0:we.lists)==null?void 0:Ce.isWatching}])},c((de=(Ee=s.value)==null?void 0:Ee.lists)!=null&&de.isWatching?"visibility":"visibility_off"),3),t[47]||(t[47]=e("span",{class:"button-label"},"–°–º–æ—Ç—Ä—é",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:t[8]||(t[8]=r=>Ye(z(ee).LATER))},[e("span",{class:S(["material-icons",{active:(De=(oe=s.value)==null?void 0:oe.lists)==null?void 0:De.isLater}])},"watch_later",2),t[48]||(t[48]=e("span",{class:"button-label"},"–ü–æ–∑–∂–µ",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:t[9]||(t[9]=r=>Ye(z(ee).COMPLETED))},[e("span",{class:S(["material-icons",{active:(Xe=(Ne=s.value)==null?void 0:Ne.lists)==null?void 0:Xe.isCompleted}])},c((cn=(dn=s.value)==null?void 0:dn.lists)!=null&&cn.isCompleted?"check_circle":"check_circle_outline"),3),t[49]||(t[49]=e("span",{class:"button-label"},"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ",-1))]),e("button",{class:S(["mobile-list-btn",{}]),onClick:t[10]||(t[10]=r=>Ye(z(ee).ABANDONED))},[e("span",{class:S(["material-icons",{active:(mn=(vn=s.value)==null?void 0:vn.lists)==null?void 0:mn.isAbandoned}])},"not_interested",2),t[50]||(t[50]=e("span",{class:"button-label"},"–ë—Ä–æ—à–µ–Ω–æ",-1))])],512),[[Tt,se.value]])])):f("",!0),e("meta",{name:"title-and-year",content:s.value.type==="FILM"&&s.value.year?"".concat(s.value.title," (").concat(s.value.year,")"):s.value.title},null,8,yi),s.value.name_original?(i(),a("meta",{key:2,name:"original-title",content:s.value.name_original},null,8,hi)):f("",!0),e("div",bi,[t[61]||(t[61]=e("h2",{class:"additional-info-title"},"–ü–æ–¥—Ä–æ–±–Ω–µ–µ",-1)),e("div",pi,[s.value.poster_url?(i(),a("div",_i,[e("a",{href:s.value.poster_url,target:"_blank",rel:"noopener noreferrer"},[e("img",{src:s.value.poster_url,alt:"–ü–æ—Å—Ç–µ—Ä —Ñ–∏–ª—å–º–∞",class:"movie-poster"},null,8,Ci)],8,wi)])):f("",!0),e("div",Ei,[e("ul",Li,[s.value.type&&z(yn)[s.value.type]?(i(),a("li",Mi,[t[51]||(t[51]=e("strong",null,"–¢–∏–ø:",-1)),A(" "+c(z(yn)[s.value.type]),1)])):f("",!0),s.value.year?(i(),a("li",Si,[t[52]||(t[52]=e("strong",null,"–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞:",-1)),A(" "+c(s.value.year),1)])):f("",!0),s.value.title?(i(),a("li",Ii,[t[53]||(t[53]=e("strong",null,"–ù–∞–∑–≤–∞–Ω–∏–µ:",-1)),A(" "+c(s.value.title),1)])):f("",!0),s.value.name_original?(i(),a("li",Ti,[t[54]||(t[54]=e("strong",null,"–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:",-1)),A(" "+c(s.value.name_original),1)])):f("",!0),s.value.slogan?(i(),a("li",xi,[t[55]||(t[55]=e("strong",null,"–°–ª–æ–≥–∞–Ω:",-1)),A(" "+c(s.value.slogan),1)])):f("",!0),s.value.production_companies?(i(),a("li",Ri,[t[56]||(t[56]=e("strong",null,"–ü—Ä–æ–¥–∞–∫—à–Ω:",-1)),A(" "+c(s.value.production_companies),1)])):f("",!0),(fn=s.value.countries)!=null&&fn.length?(i(),a("li",Ni,[t[57]||(t[57]=e("strong",null,"–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:",-1)),A(" "+c(s.value.countries.map(r=>r.country).join(", ")),1)])):f("",!0),(gn=s.value.genres)!=null&&gn.length?(i(),a("li",Pi,[t[58]||(t[58]=e("strong",null,"–ñ–∞–Ω—Ä—ã:",-1)),A(" "+c(s.value.genres.map(r=>r.genre).join(", ")),1)])):f("",!0),s.value.film_length?(i(),a("li",ji,[t[59]||(t[59]=e("strong",null,"–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",-1)),A(" "+c(We(s.value.film_length)),1)])):f("",!0),s.value.rating_mpaa||s.value.rating_age_limits?(i(),a("li",Bi,[s.value.rating_mpaa?(i(),a("div",Ui,[t[60]||(t[60]=e("strong",null,"MPAA",-1)),e("span",null,c(s.value.rating_mpaa.toUpperCase()),1)])):f("",!0),s.value.rating_age_limits?(i(),a("div",Ai,[e("strong",null,c(s.value.rating_age_limits.replace("age",""))+"+",1)])):f("",!0)])):f("",!0)]),e("div",Oi,[s.value.description?(i(),a("p",Vi,c(s.value.description),1)):f("",!0)])])])]),O.value&&z(o).token?(i(),a("div",Fi,[e("div",{class:"movie-note-header"},[t[63]||(t[63]=e("div",{class:"movie-note-title"},[e("i",{class:"fa-solid fa-note-sticky"}),e("h3",null,"–ú–æ—è –∑–∞–º–µ—Ç–∫–∞")],-1)),e("div",{class:"movie-note-actions"},[e("button",{class:"note-edit-btn",title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",onClick:Xt},t[62]||(t[62]=[e("i",{class:"fas fa-edit"},null,-1)]))])]),e("div",Hi,c(O.value.note_text),1),e("div",Di,[e("span",qi,[t[64]||(t[64]=e("i",{class:"far fa-calendar"},null,-1)),A(" –û–±–Ω–æ–≤–ª–µ–Ω–æ: "+c(new Date(O.value.updated_at).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})),1)])])])):f("",!0),ct.value?(i(),a("div",zi,[(i(),Je(Hl,{key:_.value,"movie-id":_.value},null,8,["movie-id"]))])):f("",!0),s.value.staff?(i(),a("div",Wi,[e("div",Ki,[V("ACTOR").length?(i(),a("div",Gi,[t[65]||(t[65]=e("h3",{class:"additional-info-title"},"–ê–∫—Ç—ë—Ä—ã",-1)),e("div",Yi,[(i(!0),a(Z,null,ne(V("ACTOR").slice(0,12),r=>(i(),a("div",{key:r.staff_id,class:"staff-item"},[e("a",{href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-link",title:r.description||""},[e("img",{src:r.poster_url,alt:r.name_ru,class:"staff-photo"},null,8,Qi),e("span",Xi,c(r.name_ru||r.name_en),1),r.description?(i(),a("span",Ji,c(r.description),1)):f("",!0)],8,Zi)]))),128)),e("a",{class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(V("ACTOR").length," –∞–∫—Ç–µ—Ä–æ–≤")}," +"+c(V("ACTOR").length-12),9,$i)])])):f("",!0),V("DIRECTOR").length?(i(),a("div",ea,[t[66]||(t[66]=e("h3",{class:"additional-info-title"},"–†–µ–∂–∏—Å—Å—ë—Ä—ã",-1)),e("div",ta,[e("div",na,[(i(!0),a(Z,null,ne(V("DIRECTOR").slice(0,5),r=>(i(),a("a",{key:r.staff_id,href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},c(r.name_ru||r.name_en),9,oa))),128)),V("DIRECTOR").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(V("DIRECTOR").length," —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤")}," +"+c(V("DIRECTOR").length-5),9,sa)):f("",!0)])])])):f("",!0),V("PRODUCER").length?(i(),a("div",la,[t[67]||(t[67]=e("h3",{class:"additional-info-title"},"–ü—Ä–æ–¥—é—Å–µ—Ä—ã",-1)),e("div",ia,[e("div",aa,[(i(!0),a(Z,null,ne(V("PRODUCER").slice(0,5),r=>(i(),a("a",{key:r.staff_id,href:"https://www.kinopoisk.ru/name/".concat(r.staff_id,"/"),target:"_blank",rel:"noopener noreferrer",class:"staff-name-link"},c(r.name_ru||r.name_en),9,ra))),128)),V("PRODUCER").length>5?(i(),a("a",{key:0,class:"expand-actors-circle-button",href:"https://www.kinopoisk.ru/film/".concat(_.value,"/cast/"),target:"_blank",rel:"noopener noreferrer",title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö ".concat(V("PRODUCER").length," –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤")}," +"+c(V("PRODUCER").length-5),9,ua)):f("",!0)])])])):f("",!0)])])):f("",!0),Ge.value.length&&T.value?(i(),a("div",da,[X(Qo,{videos:Ge.value,"active-video-index":I.value,onSelect:l.playTrailer},null,8,["videos","active-video-index","onSelect"])])):f("",!0),be.value.length?(i(),a("div",ca,[t[68]||(t[68]=e("h2",null,"–°–∏–∫–≤–µ–ª—ã –∏ –ø—Ä–∏–∫–≤–µ–ª—ã",-1)),X(z(Cn),{"movies-list":L.value?be.value:be.value.slice(0,W.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),be.value.length>W.value?(i(),a("a",{key:0,class:"expand-circle-button",title:"".concat(L.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(be.value.length,")"),onClick:t[11]||(t[11]=r=>L.value=!L.value)},c(L.value?"‚àí":"+".concat(be.value.length-W.value)),9,va)):f("",!0)])):f("",!0),y.value.length?(i(),a("div",ma,[t[69]||(t[69]=e("h2",null,"–ü–æ—Ö–æ–∂–∏–µ",-1)),X(z(Cn),{"movies-list":j.value?y.value:y.value.slice(0,W.value),loading:!1,"is-history":!1,class:"related-movies-list"},null,8,["movies-list"]),y.value.length>W.value?(i(),a("a",{key:0,class:"expand-circle-button",title:"".concat(j.value?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"," (").concat(y.value.length,")"),onClick:t[12]||(t[12]=r=>j.value=!j.value)},c(j.value?"‚àí":"+".concat(y.value.length-W.value)),9,fa)):f("",!0)])):f("",!0)])):f("",!0)])]),X(Sn,{ref_key:"notificationRef",ref:v},null,512),H.value!==null?(i(),a("div",ga,[e("div",ka,[ae.value?(i(),a("div",ya,t[70]||(t[70]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...",-1)]))):(i(),a("div",ha,c(H.value),1))]),e("div",ba,[e("a",{href:"https://www.imdb.com/title/".concat(s.value.imdb_id,"/parentalguide"),target:"_blank",rel:"noopener noreferrer",class:"nudity-info-button"},t[71]||(t[71]=[e("i",{class:"fas fa-external-link-alt"},null,-1),e("span",null,"Parents Guide",-1)]),8,pa),e("button",{class:"nudity-info-button",onClick:G},t[72]||(t[72]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"Copy",-1)])),e("button",{class:"nudity-info-button",onClick:Ae},t[73]||(t[73]=[e("i",{class:"fas fa-language"},null,-1),e("span",null,"Translate",-1)]))])])):f("",!0),x.value!==void 0?(i(),a("div",_a,[e("div",wa,[e("div",{class:"acknowledgment-table"},[t[76]||(t[76]=e("div",{class:"acknowledgment-header"},[e("i",{class:"fa-solid fa-heart"}),e("span",null,"–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏")],-1)),e("div",{class:"acknowledgment-content"},[t[75]||(t[75]=e("div",{class:"acknowledgment-row"},[e("a",{href:"https://www.twitch.tv/tanyabelkova",target:"_blank",rel:"noopener noreferrer",class:"twitch-link"},[e("i",{class:"fa-brands fa-twitch"}),e("span",null,"TanyaBelkova")]),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –æ—Å–Ω–æ–≤—É –±–∞–∑—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤")],-1)),e("div",{class:"acknowledgment-row clickable",onClick:Hn},t[74]||(t[74]=[e("div",{class:"community-link"},[e("i",{class:"fa-solid fa-users"}),e("span",null,"–°–æ–æ–±—â–µ—Å—Ç–≤–æ")],-1),e("span",{class:"acknowledgment-text"},"‚Äî –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–∏–Ω–≥–æ–≤",-1)]))])]),e("div",{class:S(["timings-content",{"no-border":!x.value}])},[t[92]||(t[92]=e("div",{class:"timings-warning"},[e("i",{class:"fas fa-exclamation-triangle"}),e("span",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º")],-1)),e("div",Ca,[x.value.length>0?(i(),a("div",Ea,[(i(!0),a(Z,null,ne(Te.value,r=>(i(),a("div",{key:r.id,class:S(["timing-entry",{pending:r.status==="pending","clean-text":r.status==="clean_text",selected:J.value.has(r.id),"top-rated":(r.voteScore||0)>=5,"highly-rated":(r.voteScore||0)>=10}])},[e("div",La,[e("div",Ma,[r.status==="pending"?(i(),a("div",Sa,"–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏")):f("",!0),r.status==="clean_text"?(i(),a("div",Ia," –¢–∞–π–º–∏–Ω–≥–∏ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ –º–æ–¥–µ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å ParentsGuide ")):f("",!0),(r.voteScore||0)>=10?(i(),a("div",Ta,t[77]||(t[77]=[e("i",{class:"fas fa-star"},null,-1),A(" –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º ")]))):(r.voteScore||0)>=5?(i(),a("div",xa,t[78]||(t[78]=[e("i",{class:"fas fa-thumbs-up"},null,-1),A(" –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ")]))):f("",!0)]),e("div",Ra,[e("button",{class:"nudity-info-button",onClick:q=>Yn(r)},c(pe.value[r.id]?"–°–∫—Ä—ã—Ç—å –ø–∞—Ä—Å–µ—Ä":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Å–µ—Ä"),9,Na),Y.value.has(r.id)?(i(),a("button",{key:0,class:"nudity-info-button overlay-button",title:"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",onClick:q=>Qn(r.id)},t[79]||(t[79]=[e("i",{class:"fas fa-eye-slash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å –∏–∑ –æ–≤–µ—Ä–ª–µ—è",-1)]),8,Pa)):(i(),a("button",{key:1,class:"nudity-info-button overlay-button",title:"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",onClick:q=>Zn(r.id)},t[80]||(t[80]=[e("i",{class:"fas fa-eye"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å –≤ –æ–≤–µ—Ä–ª–µ–π",-1)]),8,ja)),Yt(r)?(i(),a(Z,{key:2},[e("button",{class:"nudity-info-button edit-button",title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥",onClick:q=>xn(r)},t[81]||(t[81]=[e("i",{class:"fas fa-edit"},null,-1),e("span",null,"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",-1)]),8,Ba),e("button",{class:"nudity-info-button delete-button",title:"–£–¥–∞–ª–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",onClick:q=>Pn(r.id)},t[82]||(t[82]=[e("i",{class:"fas fa-trash"},null,-1),e("span",null,"–£–¥–∞–ª–∏—Ç—å",-1)]),8,Ua)],64)):f("",!0),Yt(r)?f("",!0):(i(),a("button",{key:3,class:"nudity-info-button report-button",title:"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–π–º–∏–Ω–≥",onClick:q=>jn(r.id)},t[83]||(t[83]=[e("i",{class:"fas fa-flag"},null,-1),e("span",null,"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è",-1)]),8,Aa))]),e("div",{class:S(["timing-hover-container",{blurred:r.status==="pending"}])},[e("span",Oa,c(r.timing_text),1),t[84]||(t[84]=e("br",null,null,-1)),e("span",Va,[A(" by "+c(r.username)+" ",1),r.user_id&&r.user_id!==0&&r.user_timing_count>0?(i(),a("span",{key:0,class:"timing-count",title:"–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (".concat(r.user_timing_count," —Ç–∞–π–º–∏–Ω–≥–æ–≤)")}," ("+c(r.user_timing_count)+") ",9,Fa)):f("",!0)])],2),e("div",Ha,[e("button",{class:S(["vote-button upvote-button",{active:r.userVote==="upvote"}]),disabled:ve.value===r.id,title:"–≠—Ç–æ—Ç —Ç–∞–π–º–∏–Ω–≥ –ø–æ–ª–µ–∑–µ–Ω –∏ —Ç–æ—á–µ–Ω",onClick:q=>Qt(r.id,"upvote")},[t[85]||(t[85]=e("i",{class:"fas fa-arrow-up"},null,-1)),e("span",qa,c(r.upvotes||0),1)],10,Da),e("span",{class:S(["vote-score",Un(r.voteScore||0)])},c(r.voteScore||0),3),e("button",{class:S(["vote-button downvote-button",{active:r.userVote==="downvote"}]),disabled:ve.value===r.id,title:"–≠—Ç–æ—Ç —Ç–∞–π–º–∏–Ω–≥ –Ω–µ—Ç–æ—á–µ–Ω –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω",onClick:q=>Qt(r.id,"downvote")},[t[86]||(t[86]=e("i",{class:"fas fa-arrow-down"},null,-1)),e("span",Wa,c(r.downvotes||0),1)],10,za)]),pe.value[r.id]&&Array.isArray(pe.value[r.id])?(i(),a("div",Ka,[t[87]||(t[87]=e("b",null,"–ü–∞—Ä—Å–µ—Ä:",-1)),pe.value[r.id].length===0?(i(),a("span",Ga,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å")):(i(),a("span",Ya,[(i(!0),a(Z,null,ne(pe.value[r.id],(q,yt)=>(i(),a("span",{key:yt}," ["+c(z(qe)(q[0]))+" - "+c(z(qe)(q[1]))+"]"+c(yt<pe.value[r.id].length-1?", ":""),1))),128))]))])):f("",!0)])],2))),128))])):(i(),a("div",Za,c("–ó–∞–ø–∏—Å–µ–π –æ —Ç–∞–π–º–∏–Ω–≥–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")))]),ye.value&&J.value.size>0?(i(),a("div",Qa,[e("h4",Xa," –û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+c(J.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",Ja,[At().length===0?(i(),a("span",$a,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",er,[(i(!0),a(Z,null,ne(At(),(r,q)=>(i(),a("span",{key:q}," ["+c(z(qe)(r[0]))+" - "+c(z(qe)(r[1]))+"]"+c(q<At().length-1?", ":""),1))),128))]))])])):f("",!0),R.value&&Y.value.size>0?(i(),a("div",tr,[e("h4",nr," –ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+c(Y.value.size)+" —Ç–∞–π–º–∏–Ω–≥–æ–≤): ",1),e("div",or,[Ot().length===0?(i(),a("span",sr,"–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏")):(i(),a("span",lr,[(i(!0),a(Z,null,ne(Ot(),(r,q)=>(i(),a("span",{key:q}," ["+c(z(qe)(r[0]))+" - "+c(z(qe)(r[1]))+"]"+c(q<Ot().length-1?", ":""),1))),128))]))])])):f("",!0),e("div",ir,[x.value.length>0?(i(),a("button",{key:0,class:"nudity-info-button",onClick:re},t[88]||(t[88]=[e("i",{class:"fas fa-copy"},null,-1),e("span",null,"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å",-1)]))):f("",!0),J.value.size>0?(i(),a("button",{key:1,class:"nudity-info-button",onClick:Xn},[t[89]||(t[89]=e("i",{class:"fas fa-eye"},null,-1)),e("span",null,"–û–±—â–∏–π –ø–∞—Ä—Å–µ—Ä ("+c(J.value.size)+")",1)])):f("",!0),Y.value.size>0?(i(),a("button",{key:2,class:"nudity-info-button",onClick:Jn},[t[90]||(t[90]=e("i",{class:"fas fa-layer-group"},null,-1)),e("span",null,"–ü–∞—Ä—Å–µ—Ä –æ–≤–µ—Ä–ª–µ—è ("+c(Y.value.size)+")",1)])):f("",!0),e("button",{class:"nudity-info-button",onClick:Tn},t[91]||(t[91]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"–î–æ–±–∞–≤–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",-1)]))])],2)])])):f("",!0),wt.value?(i(),a("div",ar,[e("div",rr,[e("div",ur,[e("h3",null,c(Ve.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∏–Ω–≥":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"),1),e("button",{class:"close-modal-btn",onClick:Bt},t[93]||(t[93]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",dr,[te(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=r=>le.value=r),placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞(–≤ [] —Å–∫–æ–±–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä [01:36] –∏–ª–∏ [01:36:55]), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø—Ä–∏–ª–∞–≥–∞–µ—Ç–µ —Ç–∞–π–º–∏–Ω–≥\n–¢–∫ –∂–µ –¥–ª—è –∞–≤—Ç–æ–±–ª—é—Ä–∞ –ø—Ä–æ—à—É –≤—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ –¥–∏–∞–ø–æ–∑–æ–Ω, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 00:12:31-00:13:04 - —Ç–µ–∫—Å—Ç, –∞ –Ω–µ 00:12:31\n–î–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–∑–æ–Ω –∏ –Ω–æ–º–µ—Ä —ç–ø–∏–∑–æ–¥–∞\n",class:"timing-textarea"},null,512),[[Me,le.value]]),Pt.value&&Pt.value.length>0?(i(),a("div",cr,[t[94]||(t[94]=e("div",{class:"timing-preview-header"},[e("i",{class:"fas fa-eye"}),e("span",null,"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Å–µ—Ä–∞")],-1)),e("div",vr,[(i(!0),a(Z,null,ne(Pt.value,(r,q)=>(i(),a("div",{key:q,class:"timing-preview-item"},[e("span",mr,c(z(qe)(r[0]))+" - "+c(z(qe)(r[1])),1),e("span",fr," ("+c(Math.round(r[1]-r[0]))+"—Å) ",1)]))),128))])])):f("",!0),e("div",gr,[e("button",{class:"submit-timing-btn",disabled:!jt.value||Oe.value,onClick:t[14]||(t[14]=r=>Ve.value?Nn():Rn())},[Oe.value?(i(),a("i",yr)):(i(),a("span",hr,c(Ve.value?"–û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥":"–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥"),1))],8,kr)])])])])):f("",!0),Ut.value?(i(),a("div",br,[e("div",pr,[e("div",{class:"timing-modal-header"},[t[96]||(t[96]=e("h3",null,"–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–π–º–∏–Ω–≥",-1)),e("button",{class:"close-modal-btn",onClick:Zt},t[95]||(t[95]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",_r,[te(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=r=>Ze.value=r),placeholder:"–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∂–∞–ª–æ–±—ã...",class:"timing-textarea",rows:"4"},null,512),[[Me,Ze.value]]),e("div",wr,[e("button",{class:"submit-timing-btn",disabled:!Ze.value.trim()||mt.value,onClick:Bn},[mt.value?(i(),a("i",Er)):(i(),a("span",Lr,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É"))],8,Cr)])])])])):f("",!0),Ie.value?(i(),a("div",Mr,[e("div",Sr,[e("div",Ir,[e("h3",null,[t[97]||(t[97]=e("i",{class:"fa-regular fa-note-sticky"},null,-1)),A(" "+c(O.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫—É":"–ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞"),1)]),e("button",{class:"close-modal-btn",onClick:Jt},t[98]||(t[98]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Tr,[t[101]||(t[101]=e("div",{class:"note-info"},[e("i",{class:"fas fa-info-circle"}),e("span",null,"–õ–∏—á–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ –æ —Ñ–∏–ª—å–º–µ, –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–∞–º")],-1)),te(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=r=>$.value=r),placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ—é –∑–∞–º–µ—Ç–∫—É –æ —Ñ–∏–ª—å–º–µ...",class:"timing-textarea note-textarea",rows:"10",maxlength:"10000"},null,512),[[Me,$.value]]),e("div",xr,c($.value.length)+" / 10000 —Å–∏–º–≤–æ–ª–æ–≤",1),e("div",Rr,[e("button",{class:"submit-timing-btn",disabled:!$.value.trim()||Pe.value,onClick:Vn},[Pe.value?(i(),a("i",Pr)):(i(),a("i",jr)),e("span",null,c(O.value?"–û–±–Ω–æ–≤–∏—Ç—å":"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),1)],8,Nr),O.value?(i(),a("button",{key:0,class:"delete-note-btn",disabled:je.value,onClick:Fn},[je.value?(i(),a("i",Ur)):(i(),a("i",Ar)),t[99]||(t[99]=e("span",null,"–£–¥–∞–ª–∏—Ç—å",-1))],8,Br)):f("",!0),e("button",{class:"cancel-note-btn",onClick:Jt},t[100]||(t[100]=[e("i",{class:"fas fa-times"},null,-1),e("span",null,"–û—Ç–º–µ–Ω–∞",-1)]))])])])])):f("",!0),Lt.value?(i(),a("div",{key:5,class:"modal-overlay",onClick:t[19]||(t[19]=r=>Lt.value=!1)},[e("div",{class:"modal-content",onClick:t[18]||(t[18]=ut(()=>{},["stop"]))},[e("div",Or,[t[103]||(t[103]=e("h3",null,[A(" –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ —Ç–∞–π–º–∏–Ω–≥–æ–≤ "),e("span",{class:"hint-text"},[A("(–•–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∏–º/—Å–æ—Ü—Å–µ—Ç–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ "),e("a",{href:"https://t.me/reyohoho_sup",target:"_blank",rel:"noopener noreferrer"},"—Ç–µ–ª–µ–≥—Ä–∞–º"),A(")")])],-1)),e("div",Vr,[e("button",{class:"close-modal-btn",onClick:t[17]||(t[17]=r=>Lt.value=!1)},t[102]||(t[102]=[e("i",{class:"fas fa-times"},null,-1)]))])]),e("div",Fr,[e("button",{class:"show-all-timings-btn",disabled:lt.value,onClick:Wn},[lt.value?(i(),a("i",Dr)):(i(),a("i",qr)),t[104]||(t[104]=e("span",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1))],8,Hr),e("div",zr,[(i(!0),a(Z,null,ne(Et.value,(r,q)=>(i(),a("div",{key:r.username,class:"top-submitter-item"},[e("div",{class:S(["submitter-rank",{gold:q===0,silver:q===1,bronze:q===2}])},c(q+1),3),e("div",Wr,[e("div",Kr,[r.stream_link?(i(),a("a",{key:0,href:r.stream_link,target:"_blank",rel:"noopener noreferrer"},[A(c(r.username)+" ",1),t[105]||(t[105]=e("i",{class:"fa-brands fa-twitch"},null,-1))],8,Gr)):(i(),a(Z,{key:1},[A(c(r.username),1)],64))]),e("div",Yr,c(r.approved_submissions_count)+" "+c(Kn(r.approved_submissions_count,["—Ñ–∏–ª—å–º","—Ñ–∏–ª—å–º–∞","—Ñ–∏–ª—å–º–æ–≤"])),1)]),e("div",Zr,[e("div",{class:"contribution-bar",style:Ht({width:Gn(r.approved_submissions_count)+"%"})},null,4)])]))),128))])])])])):f("",!0),ft.value?(i(),a("div",{key:6,class:"modal-overlay",onClick:t[22]||(t[22]=r=>ft.value=!1)},[e("div",{class:"modal-content all-timings-modal",onClick:t[21]||(t[21]=ut(()=>{},["stop"]))},[e("div",Qr,[t[107]||(t[107]=e("h3",null,"–í—Å–µ —Ç–∞–π–º–∏–Ω–≥–∏",-1)),e("button",{class:"close-modal-btn",onClick:t[20]||(t[20]=r=>ft.value=!1)},t[106]||(t[106]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",Xr,[lt.value?(i(),a("div",Jr,t[108]||(t[108]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("span",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤...",-1)]))):st.value.length===0?(i(),a("div",$r,t[109]||(t[109]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):ln.value.length===0?(i(),a("div",eu,t[110]||(t[110]=[e("p",null,"–¢–∞–π–º–∏–Ω–≥–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)]))):(i(),a("div",tu,[(i(!0),a(Z,null,ne(ln.value,r=>{var q;return i(),a("div",{key:r.id,class:"timing-item"},[e("div",nu,[e("div",ou,[e("span",su,c(r.username),1),e("span",lu,c(z(Ln)(r.submitted_at)),1)]),e("div",iu,[X(p,{to:"/movie/".concat(r.kp_id),class:"timing-kp-id clickable",title:"–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–ª—å–º—É ".concat(r.kp_id)},{default:Ft(()=>[A(" KP: "+c(r.kp_id),1)]),_:2},1032,["to","title"]),(q=z(o).user)!=null&&q.is_admin&&r.status==="pending"?(i(),a("div",au,[r.status==="pending"?(i(),a("button",{key:0,class:"approve-btn",disabled:ge.value,title:"–û–¥–æ–±—Ä–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",onClick:yt=>Dn(r.id)},[Re.value===r.id&&Fe.value?(i(),a("i",uu)):(i(),a("i",du))],8,ru)):f("",!0),r.status==="pending"?(i(),a("button",{key:1,class:"reject-btn",disabled:ge.value,title:"–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ç–∞–π–º–∏–Ω–≥",onClick:yt=>qn(r.id)},[Re.value===r.id&&!Fe.value&&!He.value?(i(),a("i",vu)):(i(),a("i",mu))],8,cu)):f("",!0),r.status==="pending"?(i(),a("button",{key:2,class:"clean-text-btn",disabled:ge.value,title:"–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ clean_text",onClick:yt=>zn(r.id)},[Re.value===r.id&&He.value?(i(),a("i",gu)):(i(),a("i",ku))],8,fu)):f("",!0)])):f("",!0)])]),e("div",yu,[e("pre",hu,c(r.timing_text),1)])])}),128))]))])])])):f("",!0),$t.value?(i(),a("div",bu,[e("div",pu,[e("div",_u,[t[112]||(t[112]=e("h3",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ OBS WebSocket",-1)),e("button",{class:"close-modal-btn",onClick:t[23]||(t[23]=r=>$t.value=!1)},t[111]||(t[111]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",wu,[e("div",Cu,[e("label",Eu,[te(e("input",{"onUpdate:modelValue":t[24]||(t[24]=r=>Mt.value=r),type:"checkbox",onChange:$n},null,544),[[hn,Mt.value]]),t[113]||(t[113]=e("span",null,"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–±–ª—é—Ä –≤ OBS",-1))]),t[114]||(t[114]=e("div",{class:"obs-setting-description"}," –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∞–≤—Ç–æ–±–ª—é—Ä –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ OBS WebSocket –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–ª—é—Ä–∞ ",-1))]),Mt.value?(i(),a("div",Lu,[e("div",Mu,[t[115]||(t[115]=e("label",null,"–•–æ—Å—Ç OBS WebSocket:",-1)),te(e("input",{"onUpdate:modelValue":t[25]||(t[25]=r=>en.value=r),type:"text",placeholder:"localhost",class:"obs-input"},null,512),[[Me,en.value]])]),e("div",Su,[t[116]||(t[116]=e("label",null,"–ü–æ—Ä—Ç OBS WebSocket:",-1)),te(e("input",{"onUpdate:modelValue":t[26]||(t[26]=r=>tn.value=r),type:"number",placeholder:"4455",class:"obs-input"},null,512),[[Me,tn.value]])]),e("div",Iu,[t[117]||(t[117]=e("label",null,"–ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):",-1)),te(e("input",{"onUpdate:modelValue":t[27]||(t[27]=r=>nn.value=r),type:"password",placeholder:"–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",class:"obs-input"},null,512),[[Me,nn.value]])]),it.value?(i(),a("div",Tu,[t[120]||(t[120]=e("label",null,"–í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –±–ª—é—Ä–∞:",-1)),kt.value.length===0?(i(),a("div",xu," ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ OBS. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã. ")):(i(),a("div",Ru,[te(e("select",{"onUpdate:modelValue":t[28]||(t[28]=r=>Qe.value=r),class:"obs-filter-select",onChange:no},[t[118]||(t[118]=e("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä",-1)),(i(!0),a(Z,null,ne(kt.value,r=>(i(),a("option",{key:r.id,value:r.id},c(r.sourceName)+" - "+c(r.filterName)+" ("+c(r.sceneName)+") ",9,Nu))),128))],544),[[ho,Qe.value]]),at.value?(i(),a("div",Pu,[e("div",ju,[e("strong",null,c(at.value.filterName),1),t[119]||(t[119]=A(" –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ ")),e("strong",null,c(at.value.sourceName),1)]),e("span",{class:S(["filter-status",{enabled:at.value.enabled}])}," –°—Ç–∞—Ç—É—Å: "+c(at.value.enabled?"‚úÖ –í–∫–ª—é—á–µ–Ω":"‚≠ï –û—Ç–∫–ª—é—á–µ–Ω"),3)])):f("",!0),e("div",Bu," üí° –ù–∞–π–¥–µ–Ω–æ "+c(kt.value.length)+" —Ñ–∏–ª—å—Ç—Ä–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä –±–ª—é—Ä–∞. ",1)]))])):f("",!0),e("div",Uu,[e("label",Au,[te(e("input",{"onUpdate:modelValue":t[29]||(t[29]=r=>sn.value=r),type:"checkbox"},null,512),[[hn,sn.value]]),t[121]||(t[121]=e("span",null,"–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å OBS –≤ –≤–∏–¥–µ–æ –æ–≤–µ—Ä–ª–µ–µ",-1))])]),e("div",{class:S(["obs-status",{connected:it.value}])},c(it.value?"–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS":"–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ OBS"),3),e("div",Ou,[e("button",{class:"obs-action-btn connect-btn",disabled:gt.value,onClick:un},[gt.value?(i(),a("i",Fu)):(i(),a("i",Hu)),A(" "+c(it.value?"–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è":"–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"),1)],8,Vu),e("button",{class:"obs-action-btn test-btn",disabled:!it.value||kt.value.length===0,onClick:eo},t[122]||(t[122]=[e("i",{class:"fas fa-eye"},null,-1),A(" –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é—Ä ")]),8,Du),e("button",{class:"obs-action-btn refresh-btn",disabled:!it.value,onClick:to},t[123]||(t[123]=[e("i",{class:"fas fa-sync"},null,-1),A(" –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ")]),8,qu)])])):f("",!0)])])])):f("",!0)],64)}}},ed=ze(zu,[["__scopeId","data-v-ecca24ce"]]);export{ed as default};
