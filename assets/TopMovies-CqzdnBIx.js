import{_ as E,r as c,c as D,A as N,o as V,S as A,b as n,d as r,m as g,j as F,F as h,f as k,D as L,E as R,V as S,W as $,K as j,G as z,i as o,n as T,t as M}from"./index-zIAJSTba.js";import{M as G}from"./MovieList-D3PCXKxc.js";import"./SpinnerLoading-BEBh3VBV.js";import"./icon-imdb-logo-5qtstUwS.js";const I={class:"wrapper"},K={class:"top-100-page",tabindex:"0"},W={class:"controls"},H={class:"filter-card time-card"},J={class:"button-group time-buttons"},O={key:0,class:"filter-separator"},P=["disabled","onClick"],X={class:"filter-card type-card"},Y={class:"button-group type-buttons"},Z=["disabled","onClick"],Q={__name:"TopMovies",setup(ee){const m=c([]),u=c(!1),l=c("24h"),t=c("all"),v=c("all"),d=c(""),b=c(null),f=A(),y=z(),C=[{label:"24 часа",apiUrl:"24h"},{label:"7 дней",apiUrl:"7d"},{label:"30 дней",apiUrl:"30d"},{label:"Всё время",apiUrl:"all"},{label:"---",apiUrl:"separator",type:"separator"},{label:"Обсуждаемое",apiUrl:"discussed"}],U=[{label:"Все",value:"all"},{label:"Фильмы",value:"movie"},{label:"Сериалы",value:"series"}],q=[{label:"Горячее",value:"hot"},{label:"Недавнее",value:"recent"}],w=D(()=>l.value==="discussed"?q:U),_=async()=>{u.value=!0,d.value="",b.value=null;try{l.value==="discussed"?m.value=await S(t.value):m.value=await $({activeTime:l.value,typeFilter:t.value})}catch(a){const{message:e,code:s}=j(a);d.value=e,b.value=s,m.value=[]}finally{u.value=!1}},x=a=>{const e=l.value;l.value=a,a==="discussed"?(e!=="discussed"&&(v.value=t.value),t.value="hot"):e==="discussed"&&(t.value=v.value),y.push({query:{...f.query,time:l.value,type:t.value}}).then(()=>{_()})},B=a=>{t.value=a,l.value!=="discussed"&&(v.value=a),y.push({query:{...f.query,type:a}}).then(()=>{_()})};return N(()=>f.query,(a,e)=>{const{time:s,type:i}=a;let p=!1;(s!==(e==null?void 0:e.time)||i!==(e==null?void 0:e.type))&&(s&&s!==l.value&&(l.value=s,p=!0),i&&i!==t.value&&(t.value=i,s!=="discussed"&&(v.value=i),p=!0),p&&_())}),V(()=>{const{time:a,type:e}=f.query;a&&(l.value=a),e&&(t.value=e,a!=="discussed"&&(v.value=e)),_()}),(a,e)=>(o(),n("div",I,[r("div",K,[r("div",W,[r("div",H,[r("div",J,[e[0]||(e[0]=r("i",{class:"material-icons card-icon"},"schedule",-1)),(o(),n(h,null,k(C,(s,i)=>(o(),n(h,{key:i},[s.type==="separator"?(o(),n("div",O)):(o(),n("button",{key:1,class:T(["filter-btn time-btn",{active:l.value===s.apiUrl,disabled:u.value}]),disabled:u.value,onClick:p=>x(s.apiUrl)},M(s.label),11,P))],64))),64))])]),r("div",X,[r("div",Y,[e[1]||(e[1]=r("i",{class:"material-icons card-icon"},"movie",-1)),(o(!0),n(h,null,k(w.value,(s,i)=>(o(),n("button",{key:i,class:T(["filter-btn type-btn",{active:t.value===s.value,disabled:u.value}]),disabled:u.value,onClick:p=>B(s.value)},M(s.label),11,Z))),128))])])]),d.value?F("",!0):(o(),g(L(G),{key:0,"movies-list":m.value,"is-history":!1,loading:u.value},null,8,["movies-list","loading"])),d.value?(o(),g(R,{key:1,message:d.value,code:b.value},null,8,["message","code"])):F("",!0)])]))}},ie=E(Q,[["__scopeId","data-v-3ca74666"]]);export{ie as default};
