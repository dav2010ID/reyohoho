!function(){function e(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function a(a){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach(function(e){t(a,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))})}return a}function t(e,a,t){return(a=function(e){var a=function(e,a){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,a||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==l(a)?a:a+""}(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,n,o,i,l=[],u=!0,s=!1;try{if(o=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(l.push(r.value),l.length!==a);u=!0);}catch(e){s=!0,n=e}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,a)||o(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,a){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=o(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==t.return||t.return()}finally{if(u)throw i}}}}function o(e,a){if(e){if("string"==typeof e)return i(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,a):void 0}}function i(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=Array(a);t<a;t++)r[t]=e[t];return r}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,a,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function o(t,r,n,o){var u=r&&r.prototype instanceof l?r:l,c=Object.create(u.prototype);return s(c,"_invoke",function(t,r,n){var o,l,u,s=0,c=n||[],d=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(a,t){return o=a,l=0,u=e,p.n=t,i}};function v(t,r){for(l=t,u=r,a=0;!d&&s&&!n&&a<c.length;a++){var n,o=c[a],v=p.p,f=o[2];t>3?(n=f===r)&&(u=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=v&&((n=t<2&&v<o[1])?(l=0,p.v=r,p.n=o[1]):v<f&&(n=t<3||o[0]>r||r>f)&&(o[4]=t,o[5]=r,p.n=f,l=0))}if(n||t>1)return i;throw d=!0,r}return function(n,c,f){if(s>1)throw TypeError("Generator is already running");for(d&&1===c&&v(c,f),l=c,u=f;(a=l<2?e:u)||!d;){o||(l?l<3?(l>1&&(p.n=-1),v(l,u)):p.n=u:p.v=u);try{if(s=2,o){if(l||(n="next"),a=o[n]){if(!(a=a.call(o,u)))throw TypeError("iterator result is not an object");if(!a.done)return a;u=a.value,l<2&&(l=0)}else 1===l&&(a=o.return)&&a.call(o),l<2&&(u=TypeError("The iterator does not provide a '"+n+"' method"),l=1);o=e}else if((a=(d=p.n<0)?u:t.call(r,p))!==i)break}catch(a){o=e,l=1,u=a}finally{s=1}}return{value:a,done:d}}}(t,n,o),!0),c}var i={};function l(){}function c(){}function d(){}a=Object.getPrototypeOf;var p=[][r]?a(a([][r]())):(s(a={},r,function(){return this}),a),v=d.prototype=l.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,n,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=d,s(v,"constructor",d),s(d,"constructor",c),c.displayName="GeneratorFunction",s(d,n,"GeneratorFunction"),s(v),s(v,n,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),(u=function(){return{w:o,m:f}})()}function s(e,a,t,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}s=function(e,a,t,r){function o(a,t){s(e,a,function(e){return this._invoke(a,t,e)})}a?n?n(e,a,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[a]=t:(o("next",0),o("throw",1),o("return",2))},s(e,a,t,r)}function c(e,a,t,r,n,o,i){try{var l=e[o](i),u=l.value}catch(e){return void t(e)}l.done?a(u):Promise.resolve(u).then(r,n)}function d(e){return function(){var a=this,t=arguments;return new Promise(function(r,n){var o=e.apply(a,t);function i(e){c(o,r,n,i,l,"next",e)}function l(e){c(o,r,n,i,l,"throw",e)}i(void 0)})}}System.register(["./index-legacy-lMFmhOUV.js","./MovieList-legacy-ByIN4goM.js","./ToastMessage-legacy-ClaIEuwX.js","./BaseModal-legacy-DQtcvqYh.js","./SpinnerLoading-legacy-C95hHYgP.js","./icon-imdb-logo-legacy-DY9dgmyD.js","./htmlSanitizer-legacy-BuNrU8dK.js"],function(e,t){"use strict";var o,i,s,c,p,v,f,b,y,g,h,m,w,x,k,j,O,S,A,E,T,D,N,_,C,P,R,I,z,L,$,M,H;return{setters:[e=>{o=e._,i=e.l,s=e.U,c=e.x,p=e.v,v=e.A,f=e.o,b=e.c,y=e.d,g=e.F,h=e.r,m=e.t,w=e.g,x=e.D,k=e.n,j=e.m,O=e.E,S=e.e,A=e.S,E=e.aS,T=e.P,D=e.J,N=e.k,_=e.aT,C=e.ai,P=e.M,R=e.b,I=e.h,z=e.R,L=e.ak},e=>{$=e.M},e=>{M=e.N},e=>{H=e.B},null,null,null],execute:function(){var t=document.createElement("style");t.textContent='.empty-state[data-v-e8aa1da9]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem}.material-icons[data-v-e8aa1da9]{font-size:1.1em}.empty-state .material-icons[data-v-e8aa1da9]{font-size:3rem;margin-bottom:1rem}.wrapper[data-v-e8aa1da9]{display:flex;min-height:100vh;box-sizing:border-box}.user-lists-page[data-v-e8aa1da9]{flex:1;padding-top:20px;padding-bottom:40px;width:100%;margin:0 auto;box-sizing:border-box}.controls[data-v-e8aa1da9]{display:flex;flex-direction:row;gap:8px;margin-bottom:20px;width:100%;align-items:center;justify-content:center;padding:0 15px;box-sizing:border-box}.filter-card[data-v-e8aa1da9]{width:auto;background:rgba(37,37,37,.8);backdrop-filter:blur(10px);border-radius:12px;padding:6px;box-shadow:0 4px 16px rgba(0,0,0,.08);transition:all .3s ease;margin:0;box-sizing:border-box;border:1px solid rgba(255,255,255,.08)}.card-header[data-v-e8aa1da9]{display:flex;gap:10px;margin-bottom:15px;position:relative}.card-title[data-v-e8aa1da9]{font-weight:600;color:#e0e0e0;font-size:1.1em;position:relative;z-index:1}.card-title[data-v-e8aa1da9]:after{content:"";position:absolute;bottom:-5px;left:0;right:0;height:2px;background:linear-gradient(90deg,#ff6b35,#f4c);border-radius:2px;opacity:.6;z-index:-1}.card-icon[data-v-e8aa1da9]{font-size:18px;color:#ff6b35;transition:color .3s;margin-right:4px;opacity:.8}.type-card .card-icon[data-v-e8aa1da9]{color:#4a90e2}.button-group[data-v-e8aa1da9]{display:flex;gap:4px;flex-wrap:nowrap;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;justify-content:flex-start;align-items:center;padding:2px}.button-group[data-v-e8aa1da9]::-webkit-scrollbar{display:none}.share-btn[data-v-e8aa1da9],.clear-btn[data-v-e8aa1da9]{padding:6px;border:1px solid rgba(255,255,255,.08);border-radius:8px;background:rgba(45,45,45,.6);color:#e0e0e0;cursor:pointer;font-weight:500;white-space:nowrap;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px rgba(0,0,0,.06);transition:all .2s ease}.share-btn[data-v-e8aa1da9]:hover{background:rgba(58,58,58,.8);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1)}.clear-btn[data-v-e8aa1da9]:hover:not(.disabled){background:rgba(58,58,58,.8);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1)}.filter-btn[data-v-e8aa1da9]{padding:6px 12px;border:1px solid rgba(255,255,255,.08);border-radius:8px;background:rgba(45,45,45,.6);color:#e0e0e0;cursor:pointer;transition:all .2s ease;font-weight:500;font-size:.85em;white-space:nowrap;flex:0 1 auto;min-width:80px;box-shadow:0 2px 4px rgba(0,0,0,.06);box-sizing:border-box}.filter-btn[data-v-e8aa1da9]:hover{background:rgba(58,58,58,.8);transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1)}.type-btn.active[data-v-e8aa1da9]{background:var(--accent-color);border-color:transparent;color:#fff;box-shadow:0 2px 8px var(--accent-transparent)}.counter[data-v-e8aa1da9]{font-size:.8em;margin-left:6px;background:rgba(255,255,255,.1);padding:2px 6px;border-radius:10px;font-weight:500;color:#fff}.type-btn.active .counter[data-v-e8aa1da9]{background:rgba(0,0,0,.2)}.filter-btn[data-v-e8aa1da9]{display:flex;align-items:center;justify-content:center;gap:4px}@media(max-width:900px){.controls[data-v-e8aa1da9]{flex-direction:column;gap:6px;padding:0 10px}.filter-card[data-v-e8aa1da9]{width:100%}.button-group[data-v-e8aa1da9]{flex-wrap:wrap;justify-content:center;gap:4px}}@media(max-width:480px){.controls[data-v-e8aa1da9]{padding:0 5px;gap:4px}.filter-card[data-v-e8aa1da9]{padding:4px;background:transparent;border:none;box-shadow:none}.button-group[data-v-e8aa1da9]{gap:3px}.card-icon[data-v-e8aa1da9]{display:none}}@media(max-width:400px){.button-group[data-v-e8aa1da9]{flex-wrap:wrap;justify-content:center}}.filter-btn.disabled[data-v-e8aa1da9],.share-btn.disabled[data-v-e8aa1da9],.clear-btn.disabled[data-v-e8aa1da9]{opacity:.6;cursor:not-allowed;pointer-events:none;transform:none!important}.filter-btn[data-v-e8aa1da9]:disabled,.share-btn[data-v-e8aa1da9]:disabled,.clear-btn[data-v-e8aa1da9]:disabled{opacity:.6;cursor:not-allowed;pointer-events:none;transform:none!important}.hidden-file-input[data-v-e8aa1da9]{display:none}\n/*$vite$:1*/',document.head.appendChild(t);var B={class:"wrapper"},F={class:"user-lists-page",tabindex:"0"},G={class:"controls"},U={class:"filter-card type-card"},q={class:"button-group type-buttons"},J=["disabled","onClick"],Y={key:0,class:"counter"},V=["disabled"],W=["disabled"],K=["disabled"],Q={class:"material-icons"},X=["disabled"],Z={key:0,class:"empty-state"},ee={__name:"UserLists",setup(e){var t=i([]),o=i(!0),ee=i(s.FAVORITE),ae=i(""),te=i(null),re=c(),ne=A(),oe=P(),ie=i(ne.params.user_id),le=i(!1),ue=i({}),se=p(),ce=i(null),de=i(!1),pe=i(null),ve=[s.FAVORITE,s.LATER,s.WATCHING,s.COMPLETED,s.ABANDONED,s.RATED,s.HISTORY],fe=N(()=>{var e;return!ie.value||String(ie.value)===String(null===(e=re.user)||void 0===e?void 0:e.id)}),be=e=>{var a=Number(e);return Number.isInteger(a)&&a>0?a:null},ye=e=>Array.isArray(e)?e.map(e=>{var a,t,r=be(null==e?void 0:e.kp_id);return r?{kp_id:r,title:"string"==typeof(null==e?void 0:e.title)?e.title:"",year:null!==(a=null==e?void 0:e.year)&&void 0!==a?a:"",type:null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"",poster:"string"==typeof(null==e?void 0:e.poster)?e.poster:"",addedAt:"string"!=typeof(null==e?void 0:e.addedAt)||Number.isNaN(Date.parse(e.addedAt))?(new Date).toISOString():e.addedAt}:null}).filter(Boolean):[],ge=(e,a)=>{var t=new Map,r=e=>{var a=t.get(e.kp_id);if(a){var r=Date.parse(a.addedAt||0);Date.parse(e.addedAt||0)>r&&t.set(e.kp_id,e)}else t.set(e.kp_id,e)};return ye(e).forEach(r),ye(a).forEach(r),Array.from(t.values()).sort((e,a)=>Date.parse(a.addedAt)-Date.parse(e.addedAt))},he=function(){var e=d(u().m(function e(){var a;return u().w(function(e){for(;;)switch(e.n){case 0:if(re.token){e.n=1;break}throw new Error("Необходимо авторизоваться");case 1:return a={},e.n=2,Promise.allSettled(ve.map(function(){var e=d(u().m(function e(a){var t,r;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T(a);case 1:return t=e.v,r=Array.isArray(t)?[...new Set(t.map(e=>be(null==e?void 0:e.kp_id)).filter(Boolean))]:[],e.a(2,{type:a,ids:r})}},e)}));return function(a){return e.apply(this,arguments)}}()));case 2:return e.v.forEach((e,t)=>{var r=ve[t];a[r]="fulfilled"===e.status?e.value.ids:[]}),e.a(2,{format:"reyohoho-user-data",version:1,exportedAt:(new Date).toISOString(),data:{serverLists:a,localHistory:ye(se.history)}})}},e)}));return function(){return e.apply(this,arguments)}}(),me=e=>{var a=new window.Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=window.URL.createObjectURL(a),r=document.createElement("a"),n=(new Date).toISOString().slice(0,10);r.href=t,r.download=`reyohoho-export-${n}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},we=function(){var e=d(u().m(function e(){var a,t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(fe.value){e.n=1;break}return e.a(2);case 1:return e.p=1,o.value=!0,e.n=2,he();case 2:a=e.v,me(a),pe.value.showNotification("Экспорт сохранен"),e.n=4;break;case 3:e.p=3,t=e.v,pe.value.showNotification((null==t?void 0:t.message)||"Ошибка при экспорте");case 4:return e.p=4,o.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),xe=()=>{var e;fe.value&&(null===(e=ce.value)||void 0===e||e.click())},ke=e=>{var a,t,r=e&&"object"===l(e)?e:{},n=(null==r||null===(a=r.data)||void 0===a?void 0:a.serverLists)||(null==r?void 0:r.serverLists)||(null==r?void 0:r.lists)||{},o=(null==r||null===(t=r.data)||void 0===t?void 0:t.localHistory)||(null==r?void 0:r.localHistory)||(null==r?void 0:r.history)||[],i={};return ve.forEach(e=>{var a=Array.isArray(n[e])?[...new Set(n[e].map(be).filter(Boolean))]:[];i[e]=a}),{lists:i,localHistory:ye(o)}},je=function(){var e=d(u().m(function e(a){var t,r,o,i,l,s,c,d,p,v,f,b,y,g,h;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(re.token){e.n=1;break}throw new Error("Необходимо авторизоваться для импорта списков");case 1:t=0,r=0,o={},i=0,l=ve;case 2:if(!(i<l.length)){e.n=7;break}return s=l[i],e.p=3,e.n=4,T(s);case 4:c=e.v,o[s]=new Set((Array.isArray(c)?c:[]).map(e=>be(null==e?void 0:e.kp_id)).filter(Boolean)),e.n=6;break;case 5:e.p=5,e.v,o[s]=new Set;case 6:i++,e.n=2;break;case 7:d=0,p=ve;case 8:if(!(d<p.length)){e.n=19;break}v=p[d],f=a[v]||[],b=n(f),e.p=9,b.s();case 10:if((y=b.n()).done){e.n=15;break}if(g=y.value,!o[v].has(g)){e.n=11;break}return e.a(3,14);case 11:return e.p=11,e.n=12,C(g,v);case 12:o[v].add(g),t+=1,e.n=14;break;case 13:e.p=13,e.v,r+=1;case 14:e.n=10;break;case 15:e.n=17;break;case 16:e.p=16,h=e.v,b.e(h);case 17:return e.p=17,b.f(),e.f(17);case 18:d++,e.n=8;break;case 19:return e.a(2,{addedCount:t,failedCount:r})}},e,null,[[11,13],[9,16,17,18],[3,5]])}));return function(a){return e.apply(this,arguments)}}(),Oe=function(){var e=d(u().m(function e(a){var t,n,i,l,s,c,d,p,v,f,b,y,g,h,m;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=a.target.files||[],n=r(t,1),i=n[0],a.target.value="",i&&fe.value){e.n=1;break}return e.a(2);case 1:return e.p=1,de.value=!0,o.value=!0,e.n=2,i.text();case 2:if(l=e.v,s=JSON.parse(l),c=ke(s),d=ve.some(e=>(c.lists[e]||[]).length>0),p=c.localHistory.length>0,d||p){e.n=3;break}return pe.value.showNotification("Файл импорта пустой или невалидный"),e.a(2);case 3:if(v=[],!d){e.n=5;break}return e.n=4,je(c.lists);case 4:f=e.v,b=f.addedCount,y=f.failedCount,v.push(`списки: +${b}`),y>0&&v.push(`ошибок: ${y}`);case 5:return p&&(g=se.history.length,h=ge(se.history,c.localHistory),se.setHistory(h),m=Math.max(0,h.length-g),v.push(`история: +${m}`)),e.n=6,Te();case 6:pe.value.showNotification(v.length?`Импорт завершен (${v.join(", ")})`:"Импорт завершен"),e.n=8;break;case 7:e.p=7,e.v,pe.value.showNotification("Ошибка импорта: проверьте формат JSON");case 8:return e.p=8,de.value=!1,o.value=!1,e.f(8);case 9:return e.a(2)}},e,null,[[1,7,8,9]])}));return function(a){return e.apply(this,arguments)}}(),Se=function(){var e=d(u().m(function e(){var a,t,r,n,o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=window.location.origin+window.location.pathname.split("/lists")[0]+"/lists",r=ie.value||(null===(a=re.user)||void 0===a?void 0:a.id),n=ne.query.type||ee.value,o=r?`${t}/${r}?type=${n}`:`${t}?type=${n}`,e.n=1,navigator.clipboard.writeText(o);case 1:pe.value.showNotification("Скопировано"),e.n=3;break;case 2:e.p=2,i=e.v,console.error("Ошибка копирования:",i);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Ae=[{label:"Избранное",value:s.FAVORITE},{label:"Смотрю",value:s.WATCHING},{label:"Позже",value:s.LATER},{label:"Просмотрено",value:s.COMPLETED},{label:"Брошено",value:s.ABANDONED},{label:"Оценено",value:s.RATED}],Ee=function(){var e=d(u().m(function e(){var a,t,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!(t=ie.value||(null===(a=re.user)||void 0===a?void 0:a.id))){e.n=2;break}return e.n=1,_(t);case 1:ue.value=e.v;case 2:e.n=4;break;case 3:e.p=3,r=e.v,console.error("Error fetching counters:",r);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=d(u().m(function e(){var a,r,n,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o.value=!0,ae.value="",te.value=null,e.p=1,!ie.value){e.n=3;break}return e.n=2,E(ee.value,ie.value);case 2:t.value=e.v,e.n=5;break;case 3:return e.n=4,T(ee.value);case 4:t.value=e.v;case 5:return e.n=6,Ee();case 6:e.n=8;break;case 7:e.p=7,i=e.v,a=D(i),r=a.message,n=a.code,ae.value=r,te.value=n,t.value=[];case 8:return e.p=8,o.value=!1,e.f(8);case 9:return e.a(2)}},e,null,[[1,7,8,9]])}));return function(){return e.apply(this,arguments)}}(),De=function(){var e=d(u().m(function e(){var a,r,n,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o.value=!0,!re.token){e.n=6;break}return e.p=1,e.n=2,z(ee.value);case 2:return t.value=[],pe.value.showNotification("Список очищен"),e.n=3,Ee();case 3:e.n=6;break;case 4:if(e.p=4,i=e.v,a=D(i),r=a.message,n=a.code,ae.value=r,te.value=n,console.error("Ошибка при очистке списка:",i),401!==n){e.n=6;break}return re.logout(),e.n=5,oe.push("/login");case 5:oe.go(0);case 6:o.value=!1,le.value=!1;case 7:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=d(u().m(function e(a){var r,n,o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!re.token){e.n=6;break}return e.p=1,e.n=2,L(a,ee.value);case 2:return t.value=t.value.filter(e=>e.kp_id!==a),pe.value.showNotification("Фильм удален из списка"),e.n=3,Ee();case 3:e.n=6;break;case 4:if(e.p=4,i=e.v,r=D(i),n=r.message,o=r.code,ae.value=n,te.value=o,console.error("Ошибка при удалении фильма:",i),401!==o){e.n=6;break}return re.logout(),e.n=5,oe.push("/login");case 5:oe.go(0);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(a){return e.apply(this,arguments)}}();return v(()=>ne.query.type,e=>{e&&Object.values(s).includes(e)&&(ee.value=e,Te())}),f(()=>{var e=ne.query.type;e&&Object.values(s).includes(e)&&(ee.value=e),Te()}),(e,r)=>{var n;return R(),b(g,null,[y("div",B,[y("div",F,[y("div",G,[y("div",U,[y("div",q,[r[6]||(r[6]=y("i",{class:"material-icons card-icon"},"movie",-1)),(R(),b(g,null,h(Ae,(e,t)=>y("button",{key:t,class:k(["filter-btn type-btn",{active:ee.value===e.value,disabled:o.value}]),disabled:o.value,onClick:t=>{return r=e.value,ee.value=r,void oe.push({query:a(a({},ne.query),{},{type:r})});var r}},[I(m(e.label)+" ",1),ue.value[e.value]?(R(),b("span",Y,m(ue.value[e.value]),1)):w("",!0)],10,J)),64)),y("button",{class:"share-btn",disabled:o.value,title:"Поделиться списком",onClick:r[0]||(r[0]=e=>Se())},[...r[3]||(r[3]=[y("span",{class:"material-icons"},m("share"),-1)])],8,V),fe.value?(R(),b("button",{key:0,class:"share-btn",disabled:o.value,title:"??????????????",onClick:we},[...r[4]||(r[4]=[y("span",{class:"material-icons"},m("download"),-1)])],8,W)):w("",!0),fe.value?(R(),b("button",{key:1,class:"share-btn",disabled:o.value||de.value,title:"?????????????",onClick:xe},[y("span",Q,m(de.value?"hourglass_top":"upload"),1)],8,K)):w("",!0),ie.value&&String(ie.value)!==String(null===(n=x(re).user)||void 0===n?void 0:n.id)?w("",!0):(R(),b("button",{key:2,class:k(["clear-btn",{disabled:!t.value.length||ee.value===x(s).RATED||o.value}]),disabled:!t.value.length||ee.value===x(s).RATED||o.value,title:"Очистить список",onClick:r[1]||(r[1]=e=>t.value.length&&ee.value!==x(s).RATED&&(le.value=!0))},[...r[5]||(r[5]=[y("span",{class:"material-icons"},m("delete_sweep"),-1)])],10,X))])])]),y("input",{ref_key:"importFileInput",ref:ce,type:"file",accept:"application/json,.json",class:"hidden-file-input",onChange:Oe},null,544),0!==t.value.length||o.value?ae.value?w("",!0):(R(),j(x($),{key:1,"movies-list":t.value,"is-history":!1,"is-mobile":x(se).isMobile,"is-user-list":!0,"show-delete":ee.value!==x(s).RATED,"show-star":ee.value===x(s).RATED,loading:o.value,onItemDeleted:Ne},null,8,["movies-list","is-mobile","show-delete","show-star","loading"])):(R(),b("div",Z,[...r[7]||(r[7]=[y("span",{class:"material-icons"},"movie",-1),y("p",null,"Нет фильмов для отображения",-1)])])),ae.value?(R(),j(O,{key:2,message:ae.value,code:te.value},null,8,["message","code"])):w("",!0)])]),S(M,{ref_key:"notificationRef",ref:pe},null,512),S(H,{"is-open":le.value,message:"Вы уверены, что хотите очистить список?",onConfirm:De,onClose:r[2]||(r[2]=e=>le.value=!1)},null,8,["is-open"])],64)}}};e("default",o(ee,[["__scopeId","data-v-e8aa1da9"]]))}}})}();
