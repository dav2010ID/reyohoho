!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var o,n,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function c(e,a,r,i){var c=a&&a.prototype instanceof d?a:d,u=Object.create(c.prototype);return t(u,"_invoke",function(e,t,a){var r,i,c,d=0,u=a||[],f=!1,s={p:0,n:0,v:o,a:p,f:p.bind(o,4),d:function(e,t){return r=e,i=0,c=o,s.n=t,l}};function p(e,t){for(i=e,c=t,n=0;!f&&d&&!a&&n<u.length;n++){var a,r=u[n],p=s.p,v=r[2];e>3?(a=v===t)&&(c=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=o):r[0]<=p&&((a=e<2&&p<r[1])?(i=0,s.v=t,s.n=r[1]):p<v&&(a=e<3||r[0]>t||t>v)&&(r[4]=e,r[5]=t,s.n=v,i=0))}if(a||e>1)return l;throw f=!0,t}return function(a,u,v){if(d>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,v),i=u,c=v;(n=i<2?o:c)||!f;){r||(i?i<3?(i>1&&(s.n=-1),p(i,c)):s.n=c:s.v=c);try{if(d=2,r){if(i||(a="next"),n=r[a]){if(!(n=n.call(r,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,i<2&&(i=0)}else 1===i&&(n=r.return)&&n.call(r),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);r=o}else if((n=(f=s.n<0)?c:e.call(t,s))!==l)break}catch(n){r=o,i=1,c=n}finally{d=1}}return{value:n,done:f}}}(e,r,i),!0),u}var l={};function d(){}function u(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(t(n={},r,function(){return this}),n),p=f.prototype=d.prototype=Object.create(s);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=f,t(p,"constructor",f),t(f,"constructor",u),u.displayName="GeneratorFunction",t(f,i,"GeneratorFunction"),t(p),t(p,i,"Generator"),t(p,r,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:v}})()}function t(e,o,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}t=function(e,o,n,a){function i(o,n){t(e,o,function(e){return this._invoke(o,n,e)})}o?r?r(e,o,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[o]=n:(i("next",0),i("throw",1),i("return",2))},t(e,o,n,a)}function o(e,t,o,n,a,r,i){try{var c=e[r](i),l=c.value}catch(e){return void o(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function c(e){o(i,a,r,c,l,"next",e)}function l(e){o(i,a,r,c,l,"throw",e)}c(void 0)})}}System.register(["./index-legacy-DCa58GTX.js"],function(t,o){"use strict";var a,r,i,c,l,d,u,f,s,p,v,g,b,m,x,h,y;return{setters:[e=>{a=e._,r=e.b,i=e.d,c=e.j,l=e.u,d=e.q,u=e.t,f=e.l,s=e.B,p=e.C,v=e.r,g=e.x,b=e.o,m=e.a0,x=e.G,h=e.$,y=e.i}],execute:function(){var o=document.createElement("style");o.textContent=".profile-container[data-v-9f2337e0]{max-width:600px;margin:0 auto;padding:20px;font-family:Arial,sans-serif}.profile-header[data-v-9f2337e0]{text-align:center;margin-bottom:30px}.profile-content[data-v-9f2337e0]{display:flex;flex-direction:column;align-items:center;gap:20px}.profile-photo[data-v-9f2337e0]{width:150px;height:150px;border-radius:50%;border:2px solid var(--accent-color);overflow:hidden;background-color:#f0f0f0;display:flex;align-items:center;justify-content:center}.profile-photo img[data-v-9f2337e0]{width:100%;height:100%;object-fit:cover}.photo-placeholder[data-v-9f2337e0]{font-size:60px;color:#666}.profile-info[data-v-9f2337e0]{width:100%;max-width:300px}.info-item[data-v-9f2337e0]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #eee}.info-item label[data-v-9f2337e0]{font-weight:700;color:#555}.editable-field[data-v-9f2337e0]{flex:1;margin-left:10px}.editable-text[data-v-9f2337e0]{cursor:pointer;padding:2px 4px;border-radius:3px;transition:background-color .2s;display:flex;align-items:center;gap:6px}.editable-text[data-v-9f2337e0]:hover{background-color:rgba(0,0,0,.05)}.edit-icon[data-v-9f2337e0]{font-size:12px;color:#999;opacity:.7;transition:opacity .2s ease}.editable-text:hover .edit-icon[data-v-9f2337e0]{opacity:1;color:var(--accent-color)}.edit-input-container[data-v-9f2337e0]{display:flex;align-items:center;gap:5px}.edit-input[data-v-9f2337e0]{flex:1;padding:4px 8px;border:1px solid var(--accent-color);border-radius:4px;font-size:14px;background-color:#fff;color:#333}.save-btn[data-v-9f2337e0],.cancel-btn[data-v-9f2337e0]{padding:4px 8px;border:none;border-radius:3px;cursor:pointer;font-size:12px;transition:background-color .2s}.save-btn[data-v-9f2337e0]{background-color:#10b981;color:#fff}.save-btn[data-v-9f2337e0]:hover{background-color:#059669}.cancel-btn[data-v-9f2337e0]{background-color:#ef4444;color:#fff}.cancel-btn[data-v-9f2337e0]:hover{background-color:#dc2626}.logout-btn[data-v-9f2337e0]{margin-top:30px;padding:10px 20px;background-color:var(--accent-color);color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px;transition:background-color .3s}.logout-btn[data-v-9f2337e0]:hover{background-color:var(--accent-hover)}.loading[data-v-9f2337e0]{text-align:center;padding:50px;color:#666}.dialog-overlay[data-v-9f2337e0]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.dialog[data-v-9f2337e0]{background-color:#fff;padding:20px;border-radius:8px;max-width:400px;width:100%}.modern-dark-dialog[data-v-9f2337e0]{background-color:#1d1d1d;color:#e2e8f0;border-radius:12px;overflow:hidden;width:320px;box-shadow:0 10px 15px -3px rgba(0,0,0,.3),0 4px 6px -2px rgba(0,0,0,.25)}.dialog-header[data-v-9f2337e0]{padding:16px 20px;border-bottom:1px solid var(--accent-color)}.dialog-header h3[data-v-9f2337e0]{margin:0;font-size:1.1rem;font-weight:600}.dialog-body[data-v-9f2337e0]{padding:20px}.dialog-body p[data-v-9f2337e0]{margin:0;line-height:1.5}.dialog-footer[data-v-9f2337e0]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px}.modern-dark-btn[data-v-9f2337e0]{padding:8px 16px;border-radius:6px;border:none;background-color:#242424;color:#e2e8f0;cursor:pointer;font-weight:500;transition:all .2s ease}.modern-dark-btn[data-v-9f2337e0]:hover{background-color:#2b2b2b}.modern-dark-btn.danger[data-v-9f2337e0]{background-color:#7f1d1d;color:#fecaca}.modern-dark-btn.danger[data-v-9f2337e0]:hover{background-color:#991b1b}\n/*$vite$:1*/",document.head.appendChild(o);var k={name:"ProfilePage",setup(){var t=v(!1),o=g(),a=x(),r=v(o.user),i=v(null),c=v(!1),l=v(""),d=v(null),u=function(){var r=n(e().m(function n(){var r,i=arguments;return e().w(function(e){for(;;)switch(e.n){case 0:if(r=i.length>0&&void 0!==i[0]&&i[0],t.value=!1,o.logout(),!r){e.n=2;break}return e.n=1,a.push("/");case 1:e.n=3;break;case 2:return e.n=3,a.push("/login");case 3:a.go(0);case 4:return e.a(2)}},n)}));return function(){return r.apply(this,arguments)}}(),f=function(){var t=n(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!l.value.trim()||l.value.trim()===r.value.name){e.n=4;break}return e.p=1,e.n=2,o.updateUserName(l.value.trim());case 2:r.value.name=l.value.trim(),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Ошибка при обновлении имени:",n);case 4:c.value=!1;case 5:return e.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}();return b(n(e().m(function t(){var o;return e().w(function(e){for(;;)switch(e.n){case 0:if(r.value||u(!0),!r.value.photo){e.n=2;break}return e.n=1,m();case 1:o=e.v,i.value=`${o}${r.value.photo}`;case 2:return e.a(2)}},t)}))),{user:r,showDialog:t,confirmLogout:()=>{t.value=!0},logout:u,photoURL:i,isEditingName:c,editingName:l,nameInput:d,startEditName:()=>{l.value=r.value.name,c.value=!0,h(()=>{var e,t;null===(e=d.value)||void 0===e||e.focus(),null===(t=d.value)||void 0===t||t.select()})},saveName:f,cancelEditName:()=>{c.value=!1,l.value=""}}}},w={class:"profile-container"},N={key:0,class:"profile-content"},j={class:"profile-photo"},E={key:0,alt:"Profile Photo"},P={key:1,class:"photo-placeholder"},C={class:"profile-info"},O={class:"info-item"},_={class:"editable-field"},z={key:1,class:"edit-input-container"},G={key:1,class:"loading"},L={key:2,class:"dialog-overlay"},S={class:"dialog modern-dark-dialog"},T={class:"dialog-footer"};t("default",a(k,[["render",function(e,t,o,n,a,v){var g=d("lazy");return y(),r("div",w,[t[14]||(t[14]=i("div",{class:"profile-header"},[i("h1",null,"Профиль")],-1)),n.user?(y(),r("div",N,[i("div",j,[n.user.photo&&n.photoURL?l((y(),r("img",E,null,512)),[[g,n.photoURL]]):(y(),r("div",P,u(String.fromCodePoint(n.user.name.codePointAt(0)).toLocaleUpperCase()),1))]),i("div",C,[i("div",O,[t[11]||(t[11]=i("label",null,"Имя:",-1)),i("div",_,[n.isEditingName?(y(),r("div",z,[l(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.editingName=e),onKeyup:[t[2]||(t[2]=p(function(){return n.saveName&&n.saveName(...arguments)},["enter"])),t[3]||(t[3]=p(function(){return n.cancelEditName&&n.cancelEditName(...arguments)},["esc"]))],onBlur:t[4]||(t[4]=function(){return n.saveName&&n.saveName(...arguments)}),ref:"nameInput",class:"edit-input",maxlength:"50"},null,544),[[s,n.editingName]]),i("button",{onClick:t[5]||(t[5]=function(){return n.saveName&&n.saveName(...arguments)}),class:"save-btn"},"✓"),i("button",{onClick:t[6]||(t[6]=function(){return n.cancelEditName&&n.cancelEditName(...arguments)}),class:"cancel-btn"},"✕")])):(y(),r("span",{key:0,onClick:t[0]||(t[0]=function(){return n.startEditName&&n.startEditName(...arguments)}),class:"editable-text"},[f(u(n.user.name)+" ",1),t[10]||(t[10]=i("i",{class:"fas fa-edit edit-icon"},null,-1))]))])])]),i("button",{class:"logout-btn",onClick:t[7]||(t[7]=function(){return n.confirmLogout&&n.confirmLogout(...arguments)})},"Выйти")])):(y(),r("div",G,"Загрузка профиля...")),n.showDialog?(y(),r("div",L,[i("div",S,[t[12]||(t[12]=i("div",{class:"dialog-header"},[i("h3",null,"Выход")],-1)),t[13]||(t[13]=i("div",{class:"dialog-body"},[i("p",null,"Вы уверены?")],-1)),i("div",T,[i("button",{class:"modern-dark-btn",onClick:t[8]||(t[8]=e=>n.showDialog=!1)},"Отмена"),i("button",{class:"modern-dark-btn danger",onClick:t[9]||(t[9]=function(){return n.logout&&n.logout(...arguments)})},"Выйти")])])])):c("",!0)])}],["__scopeId","data-v-9f2337e0"]]))}}})}();
